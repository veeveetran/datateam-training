<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>datateam-training.utf8</title>
  <meta name="description" content="">
  <meta name="generator" content="bookdown 0.7.7 and GitBook 2.6.7">

  <meta property="og:title" content="datateam-training.utf8" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="datateam-training.utf8" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="edit-eml.html">
<link rel="next" href="edit-attributelists.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="../styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Team Reference</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Datateam miscellaneous</a><ul>
<li class="chapter" data-level="" data-path="cyberduck-instructions.html"><a href="cyberduck-instructions.html"><i class="fa fa-check"></i>Cyberduck instructions</a></li>
<li class="chapter" data-level="" data-path="project-specific-steps.html"><a href="project-specific-steps.html"><i class="fa fa-check"></i>Project-specific steps</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-data-packages.html"><a href="edit-data-packages.html"><i class="fa fa-check"></i>Edit data packages</a><ul>
<li class="chapter" data-level="" data-path="create-a-resource-map.html"><a href="create-a-resource-map.html"><i class="fa fa-check"></i>Create a resource map</a></li>
<li class="chapter" data-level="" data-path="edit-sysmeta.html"><a href="edit-sysmeta.html"><i class="fa fa-check"></i>Edit sysmeta</a><ul>
<li class="chapter" data-level="" data-path="edit-sysmeta.html"><a href="edit-sysmeta.html#identifiers-and-sysmeta"><i class="fa fa-check"></i>Identifiers and sysmeta</a></li>
<li class="chapter" data-level="" data-path="edit-sysmeta.html"><a href="edit-sysmeta.html#additional-resources"><i class="fa fa-check"></i>Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="get-package-and-eml.html"><a href="get-package-and-eml.html"><i class="fa fa-check"></i>Get package and EML</a></li>
<li class="chapter" data-level="" data-path="publish-an-object.html"><a href="publish-an-object.html"><i class="fa fa-check"></i>Publish an object</a></li>
<li class="chapter" data-level="" data-path="set-dataone-nodes.html"><a href="set-dataone-nodes.html"><i class="fa fa-check"></i>Set DataONE nodes</a><ul>
<li class="chapter" data-level="" data-path="set-dataone-nodes.html"><a href="set-dataone-nodes.html#test-nodes"><i class="fa fa-check"></i>Test nodes</a></li>
<li class="chapter" data-level="" data-path="set-dataone-nodes.html"><a href="set-dataone-nodes.html#production-nodes"><i class="fa fa-check"></i>Production nodes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="set-rights-and-access.html"><a href="set-rights-and-access.html"><i class="fa fa-check"></i>Set rights and access</a></li>
<li class="chapter" data-level="" data-path="show-indexing-status.html"><a href="show-indexing-status.html"><i class="fa fa-check"></i>Show indexing status</a></li>
<li class="chapter" data-level="" data-path="update-a-package.html"><a href="update-a-package.html"><i class="fa fa-check"></i>Update a package</a><ul>
<li class="chapter" data-level="" data-path="update-a-package.html"><a href="update-a-package.html#updating-metadata"><i class="fa fa-check"></i>Updating metadata</a></li>
<li class="chapter" data-level="" data-path="update-a-package.html"><a href="update-a-package.html#updating-data"><i class="fa fa-check"></i>Updating data</a></li>
<li class="chapter" data-level="" data-path="update-a-package.html"><a href="update-a-package.html#publish-update"><i class="fa fa-check"></i>Publish update</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="update-an-object.html"><a href="update-an-object.html"><i class="fa fa-check"></i>Update an object</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="explore-eml.html"><a href="explore-eml.html"><i class="fa fa-check"></i>Explore EML</a><ul>
<li class="chapter" data-level="" data-path="explore-eml.html"><a href="explore-eml.html#access-specific-elements"><i class="fa fa-check"></i>Access specific elements</a></li>
<li class="chapter" data-level="" data-path="explore-eml.html"><a href="explore-eml.html#understand-the-eml-schema"><i class="fa fa-check"></i>Understand the EML schema</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-eml.html"><a href="edit-eml.html"><i class="fa fa-check"></i>Edit EML</a><ul>
<li class="chapter" data-level="" data-path="edit-an-eml-element.html"><a href="edit-an-eml-element.html"><i class="fa fa-check"></i>Edit an EML element</a><ul>
<li class="chapter" data-level="" data-path="edit-an-eml-element.html"><a href="edit-an-eml-element.html#edit-eml-with-strings"><i class="fa fa-check"></i>Edit EML with strings</a></li>
<li class="chapter" data-level="" data-path="edit-an-eml-element.html"><a href="edit-an-eml-element.html#edit-eml-with-eml"><i class="fa fa-check"></i>Edit EML with EML</a></li>
<li class="chapter" data-level="" data-path="edit-an-eml-element.html"><a href="edit-an-eml-element.html#edit-eml-with-objects"><i class="fa fa-check"></i>Edit EML with objects</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-attributelists.html"><a href="edit-attributelists.html"><i class="fa fa-check"></i>Edit attributeLists</a><ul>
<li class="chapter" data-level="" data-path="edit-attributelists.html"><a href="edit-attributelists.html#edit-attributes"><i class="fa fa-check"></i>Edit Attributes</a></li>
<li class="chapter" data-level="" data-path="edit-attributelists.html"><a href="edit-attributelists.html#edit-custom-units"><i class="fa fa-check"></i>Edit Custom Units</a></li>
<li class="chapter" data-level="" data-path="edit-attributelists.html"><a href="edit-attributelists.html#edit-factors"><i class="fa fa-check"></i>Edit Factors</a></li>
<li class="chapter" data-level="" data-path="edit-attributelists.html"><a href="edit-attributelists.html#finalize-attributelist"><i class="fa fa-check"></i>Finalize attributeList</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-datatables.html"><a href="edit-datatables.html"><i class="fa fa-check"></i>Edit dataTables</a></li>
<li class="chapter" data-level="" data-path="edit-otherentities.html"><a href="edit-otherentities.html"><i class="fa fa-check"></i>Edit otherEntities</a><ul>
<li class="chapter" data-level="" data-path="edit-otherentities.html"><a href="edit-otherentities.html#remove-otherentities"><i class="fa fa-check"></i>Remove otherEntities</a></li>
<li class="chapter" data-level="" data-path="edit-otherentities.html"><a href="edit-otherentities.html#create-otherentities"><i class="fa fa-check"></i>Create otherEntities</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="explore-eml-1.html"><a href="explore-eml-1.html"><i class="fa fa-check"></i>Explore EML</a><ul>
<li class="chapter" data-level="" data-path="explore-eml-1.html"><a href="explore-eml-1.html#access-specific-elements-1"><i class="fa fa-check"></i>Access specific elements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="format-text-in-eml.html"><a href="format-text-in-eml.html"><i class="fa fa-check"></i>Format text in EML</a><ul>
<li class="chapter" data-level="" data-path="format-text-in-eml.html"><a href="format-text-in-eml.html#type-setting"><i class="fa fa-check"></i>Type-setting</a></li>
<li class="chapter" data-level="" data-path="format-text-in-eml.html"><a href="format-text-in-eml.html#links"><i class="fa fa-check"></i>Links</a></li>
<li class="chapter" data-level="" data-path="format-text-in-eml.html"><a href="format-text-in-eml.html#lists"><i class="fa fa-check"></i>Lists</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="set-coverages.html"><a href="set-coverages.html"><i class="fa fa-check"></i>Set coverages</a></li>
<li class="chapter" data-level="" data-path="set-methods.html"><a href="set-methods.html"><i class="fa fa-check"></i>Set methods</a></li>
<li class="chapter" data-level="" data-path="set-parties.html"><a href="set-parties.html"><i class="fa fa-check"></i>Set parties</a></li>
<li class="chapter" data-level="" data-path="set-physical.html"><a href="set-physical.html"><i class="fa fa-check"></i>Set physical</a></li>
<li class="chapter" data-level="" data-path="use-references.html"><a href="use-references.html"><i class="fa fa-check"></i>Use references</a><ul>
<li class="chapter" data-level="" data-path="use-references.html"><a href="use-references.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="use-references.html"><a href="use-references.html#example-with-parties"><i class="fa fa-check"></i>Example with parties</a></li>
<li class="chapter" data-level="" data-path="use-references.html"><a href="use-references.html#example-with-attributes"><i class="fa fa-check"></i>Example with attributes</a></li>
<li class="chapter" data-level="" data-path="use-references.html"><a href="use-references.html#add-creator-ids"><i class="fa fa-check"></i>Add creator IDs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="pi-correspondence.html"><a href="pi-correspondence.html"><i class="fa fa-check"></i>PI correspondence</a><ul>
<li class="chapter" data-level="" data-path="email-templates.html"><a href="email-templates.html"><i class="fa fa-check"></i>Email Templates</a><ul>
<li class="chapter" data-level="" data-path="email-templates.html"><a href="email-templates.html#additional-email-templates"><i class="fa fa-check"></i>Additional email templates</a></li>
<li class="chapter" data-level="" data-path="email-templates.html"><a href="email-templates.html#final-email-templates"><i class="fa fa-check"></i>Final email templates</a></li>
<li class="chapter" data-level="" data-path="email-templates.html"><a href="email-templates.html#initial-email-template"><i class="fa fa-check"></i>Initial email template</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="initial-review-checklist.html"><a href="initial-review-checklist.html"><i class="fa fa-check"></i>Initial review checklist</a></li>
<li class="chapter" data-level="" data-path="navigate-rt.html"><a href="navigate-rt.html"><i class="fa fa-check"></i>Navigate RT</a><ul>
<li class="chapter" data-level="" data-path="navigate-rt.html"><a href="navigate-rt.html#front-page"><i class="fa fa-check"></i>Front page</a></li>
<li class="chapter" data-level="" data-path="navigate-rt.html"><a href="navigate-rt.html#all-tickets"><i class="fa fa-check"></i>All tickets</a></li>
<li class="chapter" data-level="" data-path="navigate-rt.html"><a href="navigate-rt.html#example-ticket"><i class="fa fa-check"></i>Example ticket</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="pi-faqs.html"><a href="pi-faqs.html"><i class="fa fa-check"></i>PI FAQs</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="miscellaneous-file-types.html"><a href="miscellaneous-file-types.html"><i class="fa fa-check"></i>Miscellaneous file types</a><ul>
<li class="chapter" data-level="" data-path="datalogger-files.html"><a href="datalogger-files.html"><i class="fa fa-check"></i>Datalogger files</a></li>
<li class="chapter" data-level="" data-path="spatial-data.html"><a href="spatial-data.html"><i class="fa fa-check"></i>Spatial data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="wrangle-data.html"><a href="wrangle-data.html"><i class="fa fa-check"></i>Wrangle data</a><ul>
<li class="chapter" data-level="" data-path="clean-column-names.html"><a href="clean-column-names.html"><i class="fa fa-check"></i>Clean column names</a></li>
<li class="chapter" data-level="" data-path="fix-excel-dates.html"><a href="fix-excel-dates.html"><i class="fa fa-check"></i>Fix Excel dates</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://nceas.github.io/datateam-training/training/" target="blank">Training</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="edit-an-eml-element" class="section level2">
<h2>Edit an EML element</h2>
<p>There are multiple ways to edit an EML element.</p>
<div id="edit-eml-with-strings" class="section level3">
<h3>Edit EML with strings</h3>
<p>The most basic way to edit an EML element would be to go into the eml schema to the location of a character string and then replace that character string with a new character string.</p>
<p>For example to change the title one could use the following commands.</p>
<pre class="sourceCode r"><code class="sourceCode r">new_title &lt;-<span class="st"> &quot;New Title&quot;</span>
eml<span class="op">@</span>dataset<span class="op">@</span>title[[<span class="dv">1</span>]]<span class="op">@</span>.Data &lt;-<span class="st"> </span>new_title</code></pre>
<p>However, this isn’t the best method to edit the EML unless you are an expert both in S4 objects and in the EML schema, since the nesting and lists of elements can get very complex.</p>
</div>
<div id="edit-eml-with-eml" class="section level3">
<h3>Edit EML with EML</h3>
<p>For editing simple text sections, a better option is to use <code>EML::read_eml</code>. To use this function, one would first run the slot that is in need of editing. For example, for a title this would involve calling</p>
<pre class="sourceCode r"><code class="sourceCode r">eml<span class="op">@</span>dataset<span class="op">@</span>title[[<span class="dv">1</span>]]</code></pre>
<p>and then copying the result. In this case, the result will be of the form <code>&lt;title&gt;Title Text Here&lt;/title&gt;</code>. To make a new title, one would replace the text between the <code>&lt;title&gt;&lt;/title&gt;</code> tags using a similar workflow as below.</p>
<pre class="sourceCode r"><code class="sourceCode r">new_title &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">read_eml</span>(<span class="st">&quot;&lt;title&gt;New Title 2&lt;/title&gt;&quot;</span>)
eml<span class="op">@</span>dataset<span class="op">@</span>title[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>new_title</code></pre>
<p>Note, without specifying which title with <code>[[1]]</code>, the following code will give you the error <code>Error in (function (cl, name, valueClass) : assignment of an object of class “title” is not valid for @‘title’ in an object of class “dataset”; is(value, &quot;ListOftitle&quot;) is not TRUE</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bad Example</span>
new_title &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">read_eml</span>(<span class="st">&quot;&lt;title&gt;New Title 2&lt;/title&gt;&quot;</span>)
eml<span class="op">@</span>dataset<span class="op">@</span>title &lt;-<span class="st"> </span>new_title</code></pre>
<p>The above gives an error because <code>eml@dataset@title</code> is a slot for a list and <code>new_title</code> is a single object. Therefore you must either specify which title you want to replace as was done above by specifying the first title in the list with <code>[[1]]</code> or turn <code>new_title</code> into a list/vector utilizing the <code>c()</code> command as follows.</p>
<pre class="sourceCode r"><code class="sourceCode r">new_title &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">read_eml</span>(<span class="st">&quot;&lt;title&gt;New Title 2&lt;/title&gt;&quot;</span>)
eml<span class="op">@</span>dataset<span class="op">@</span>title &lt;-<span class="st"> </span><span class="kw">c</span>(new_title)</code></pre>
<p>However, if there were multiple titles, the above would replace all the titles with the single title. This behavior may or may not be desirable so be careful.</p>
<p>One final note, a benefit of this method to edit EML objects is that <a href="#advanced-eml-text">advanced text features can be easily added using this workflow</a>.</p>
</div>
<div id="edit-eml-with-objects" class="section level3">
<h3>Edit EML with objects</h3>
<p>A final way to edit an EML element would be to build a new object to replace the old object. To begin, you must determine the class of the object you want to edit (generally this is just the schema name of the object). The function <code>class()</code> is helpful here. For example, if you want to edit <code>eml@dataset@title[[1]]</code> use the following command to find the class.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(eml<span class="op">@</span>dataset<span class="op">@</span>title[[<span class="dv">1</span>]])</code></pre>
<p>The result shows that this object has a class <code>title</code>. Therefore you must replace it with an object of class <code>title</code>. To do so use <code>as()</code>. To use <code>as()</code> input the the desired string followed by the desired <code>class</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">new_title &lt;-<span class="st"> </span><span class="kw">as</span>(<span class="st">&quot;New Title 3&quot;</span>, <span class="st">&quot;title&quot;</span>)

eml<span class="op">@</span>dataset<span class="op">@</span>title[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>new_title
<span class="co">#or</span>
eml<span class="op">@</span>dataset<span class="op">@</span>title &lt;-<span class="st"> </span><span class="kw">c</span>(new_title)</code></pre>
<p>Note, if you want to create an object with nested objects, you may have to use the command <code>new()</code> which is similar to <code>as()</code> but with the order of specifying values and class switched. See help on <a href="edit-datatables.html#edit-datatables">editing datatables for an example of when to use <code>new()</code></a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="edit-eml.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="edit-attributelists.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
