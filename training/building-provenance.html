<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>NCEAS Data Team Training</title>
  <meta name="description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center Projects">
  <meta name="generator" content="bookdown 0.7.7 and GitBook 2.6.7">

  <meta property="og:title" content="NCEAS Data Team Training" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center Projects" />
  <meta name="github-repo" content="rstudio/datateam-training" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="NCEAS Data Team Training" />
  
  <meta name="twitter:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center Projects" />
  

<meta name="author" content="Jeanette Clark, Jesse Goldstein, Dominic Mullen, Bryce Mecum, Matt Jones, Peter Slaughter, Irene Steves, Mitchell Maier">


<meta name="date" content="2018-04-12">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="nesting-a-data-package.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="../styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Team Training</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to NCEAS!</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#first-day-to-dos"><i class="fa fa-check"></i><b>1.1</b> First day to-dos</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#account-information"><i class="fa fa-check"></i><b>1.2</b> Account information</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#nceas-events"><i class="fa fa-check"></i><b>1.3</b> NCEAS Events</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html"><i class="fa fa-check"></i><b>2</b> Introduction to open science</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#open-science-background-reading"><i class="fa fa-check"></i><b>2.1</b> Open science background reading</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#effective-data-management"><i class="fa fa-check"></i><b>2.2</b> Effective data management</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#using-dataone"><i class="fa fa-check"></i><b>2.3</b> Using DataONE</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#working-on-a-remote-server"><i class="fa fa-check"></i><b>2.4</b> Working on a remote server</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#cyberduck-instructions"><i class="fa fa-check"></i><b>2.5</b> Cyberduck instructions</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-paths"><i class="fa fa-check"></i><b>2.6</b> A note on paths</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-scripts"><i class="fa fa-check"></i><b>2.7</b> A note on scripts</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#exercise-1"><i class="fa fa-check"></i><b>2.8</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html"><i class="fa fa-check"></i><b>3</b> Create data packages in R</a><ul>
<li class="chapter" data-level="3.1" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#what-is-in-a-package"><i class="fa fa-check"></i><b>3.1</b> What is in a package?</a></li>
<li class="chapter" data-level="3.2" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#about-identifiers"><i class="fa fa-check"></i><b>3.2</b> About identifiers</a></li>
<li class="chapter" data-level="3.3" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#uploading-packages-using-r"><i class="fa fa-check"></i><b>3.3</b> Uploading packages using R</a></li>
<li class="chapter" data-level="3.4" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#set-dataone-nodes"><i class="fa fa-check"></i><b>3.4</b> Set DataONE nodes</a><ul>
<li class="chapter" data-level="3.4.1" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#test-nodes"><i class="fa fa-check"></i><b>3.4.1</b> Test nodes</a></li>
<li class="chapter" data-level="3.4.2" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#production-nodes"><i class="fa fa-check"></i><b>3.4.2</b> Production nodes</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#publish-an-object"><i class="fa fa-check"></i><b>3.5</b> Publish an object</a></li>
<li class="chapter" data-level="3.6" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#create-a-resource-map"><i class="fa fa-check"></i><b>3.6</b> Create a resource map</a></li>
<li class="chapter" data-level="3.7" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#exercise-2"><i class="fa fa-check"></i><b>3.7</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="update-a-data-package.html"><a href="update-a-data-package.html"><i class="fa fa-check"></i><b>4</b> Update a data package</a><ul>
<li class="chapter" data-level="4.1" data-path="update-a-data-package.html"><a href="update-a-data-package.html#get-package-and-eml"><i class="fa fa-check"></i><b>4.1</b> Get package and EML</a></li>
<li class="chapter" data-level="4.2" data-path="update-a-data-package.html"><a href="update-a-data-package.html#update-an-object"><i class="fa fa-check"></i><b>4.2</b> Update an object</a></li>
<li class="chapter" data-level="4.3" data-path="update-a-data-package.html"><a href="update-a-data-package.html#update-a-package"><i class="fa fa-check"></i><b>4.3</b> Update a package</a><ul>
<li class="chapter" data-level="4.3.1" data-path="update-a-data-package.html"><a href="update-a-data-package.html#updating-metadata"><i class="fa fa-check"></i><b>4.3.1</b> Updating metadata</a></li>
<li class="chapter" data-level="4.3.2" data-path="update-a-data-package.html"><a href="update-a-data-package.html#updating-data"><i class="fa fa-check"></i><b>4.3.2</b> Updating data</a></li>
<li class="chapter" data-level="4.3.3" data-path="update-a-data-package.html"><a href="update-a-data-package.html#publish-update"><i class="fa fa-check"></i><b>4.3.3</b> Publish update</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="update-a-data-package.html"><a href="update-a-data-package.html#exercise-3"><i class="fa fa-check"></i><b>4.4</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="explore-eml.html"><a href="explore-eml.html"><i class="fa fa-check"></i><b>5</b> Explore EML</a><ul>
<li class="chapter" data-level="5.0.1" data-path="explore-eml.html"><a href="explore-eml.html#understand-the-eml-schema"><i class="fa fa-check"></i><b>5.0.1</b> Understand the EML schema</a></li>
<li class="chapter" data-level="5.0.2" data-path="explore-eml.html"><a href="explore-eml.html#access-specific-elements"><i class="fa fa-check"></i><b>5.0.2</b> Access specific elements</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html"><i class="fa fa-check"></i><b>6</b> Editing EML in R</a><ul>
<li class="chapter" data-level="6.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-an-eml-element"><i class="fa fa-check"></i><b>6.1</b> Edit an EML element</a><ul>
<li class="chapter" data-level="6.1.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-eml-with-strings"><i class="fa fa-check"></i><b>6.1.1</b> Edit EML with strings</a></li>
<li class="chapter" data-level="6.1.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-eml-with-eml"><i class="fa fa-check"></i><b>6.1.2</b> Edit EML with EML</a></li>
<li class="chapter" data-level="6.1.3" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-eml-with-objects"><i class="fa fa-check"></i><b>6.1.3</b> Edit EML with objects</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-attributelists"><i class="fa fa-check"></i><b>6.2</b> Edit attributeLists</a><ul>
<li class="chapter" data-level="6.2.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-attributes"><i class="fa fa-check"></i><b>6.2.1</b> Edit Attributes</a></li>
<li class="chapter" data-level="6.2.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-custom-units"><i class="fa fa-check"></i><b>6.2.2</b> Edit Custom Units</a></li>
<li class="chapter" data-level="6.2.3" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-factors"><i class="fa fa-check"></i><b>6.2.3</b> Edit Factors</a></li>
<li class="chapter" data-level="6.2.4" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#finalize-attributelist"><i class="fa fa-check"></i><b>6.2.4</b> Finalize attributeList</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-physical"><i class="fa fa-check"></i><b>6.3</b> Set physical</a></li>
<li class="chapter" data-level="6.4" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-datatables"><i class="fa fa-check"></i><b>6.4</b> Edit dataTables</a></li>
<li class="chapter" data-level="6.5" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-otherentities"><i class="fa fa-check"></i><b>6.5</b> Edit otherEntities</a><ul>
<li class="chapter" data-level="6.5.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#remove-otherentities"><i class="fa fa-check"></i><b>6.5.1</b> Remove otherEntities</a></li>
<li class="chapter" data-level="6.5.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#create-otherentities"><i class="fa fa-check"></i><b>6.5.2</b> Create otherEntities</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-coverages"><i class="fa fa-check"></i><b>6.6</b> Set coverages</a></li>
<li class="chapter" data-level="6.7" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-methods"><i class="fa fa-check"></i><b>6.7</b> Set methods</a></li>
<li class="chapter" data-level="6.8" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-parties"><i class="fa fa-check"></i><b>6.8</b> Set parties</a></li>
<li class="chapter" data-level="6.9" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#exercise-4"><i class="fa fa-check"></i><b>6.9</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="system-metadata.html"><a href="system-metadata.html"><i class="fa fa-check"></i><b>7</b> System metadata</a><ul>
<li class="chapter" data-level="7.1" data-path="system-metadata.html"><a href="system-metadata.html#edit-sysmeta"><i class="fa fa-check"></i><b>7.1</b> Edit sysmeta</a><ul>
<li class="chapter" data-level="7.1.1" data-path="system-metadata.html"><a href="system-metadata.html#identifiers-and-sysmeta"><i class="fa fa-check"></i><b>7.1.1</b> Identifiers and sysmeta</a></li>
<li class="chapter" data-level="7.1.2" data-path="system-metadata.html"><a href="system-metadata.html#additional-resources"><i class="fa fa-check"></i><b>7.1.2</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="system-metadata.html"><a href="system-metadata.html#set-rights-and-access"><i class="fa fa-check"></i><b>7.2</b> Set rights and access</a><ul>
<li class="chapter" data-level="7.2.1" data-path="system-metadata.html"><a href="system-metadata.html#exercise-5"><i class="fa fa-check"></i><b>7.2.1</b> Exercise 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html"><i class="fa fa-check"></i><b>8</b> Using Git in RStudio</a><ul>
<li class="chapter" data-level="8.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#introduction"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="8.1.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#so-why-do-i-need-to-use-this-again"><i class="fa fa-check"></i><b>8.1.1</b> So why do I need to use this again?</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#setting-up-git"><i class="fa fa-check"></i><b>8.2</b> Setting up git</a><ul>
<li class="chapter" data-level="8.2.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#cloning-the-arctic-data-repo"><i class="fa fa-check"></i><b>8.2.1</b> Cloning the arctic-data repo</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#working-with-the-repository"><i class="fa fa-check"></i><b>8.3</b> Working with the repository</a><ul>
<li class="chapter" data-level="8.3.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#adding-a-new-script"><i class="fa fa-check"></i><b>8.3.1</b> Adding a new script</a></li>
<li class="chapter" data-level="8.3.2" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#editing-a-script"><i class="fa fa-check"></i><b>8.3.2</b> Editing a script</a></li>
<li class="chapter" data-level="8.3.3" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#where-do-i-commit"><i class="fa fa-check"></i><b>8.3.3</b> Where do I commit?</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#my-git-tab-disappeared"><i class="fa fa-check"></i><b>8.4</b> My Git tab disappeared</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="using-rt.html"><a href="using-rt.html"><i class="fa fa-check"></i><b>9</b> Using RT</a><ul>
<li class="chapter" data-level="9.1" data-path="using-rt.html"><a href="using-rt.html#navigate-rt"><i class="fa fa-check"></i><b>9.1</b> Navigate RT</a><ul>
<li class="chapter" data-level="9.1.1" data-path="using-rt.html"><a href="using-rt.html#front-page"><i class="fa fa-check"></i><b>9.1.1</b> Front page</a></li>
<li class="chapter" data-level="9.1.2" data-path="using-rt.html"><a href="using-rt.html#all-tickets"><i class="fa fa-check"></i><b>9.1.2</b> All tickets</a></li>
<li class="chapter" data-level="9.1.3" data-path="using-rt.html"><a href="using-rt.html#example-ticket"><i class="fa fa-check"></i><b>9.1.3</b> Example ticket</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html"><i class="fa fa-check"></i><b>10</b> Introduction to Solr</a><ul>
<li class="chapter" data-level="10.1" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#querying-solr"><i class="fa fa-check"></i><b>10.1</b> Querying Solr</a><ul>
<li class="chapter" data-level="10.1.1" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#parts-of-a-query"><i class="fa fa-check"></i><b>10.1.1</b> Parts of a Query</a></li>
<li class="chapter" data-level="10.1.2" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#constructing-a-query"><i class="fa fa-check"></i><b>10.1.2</b> Constructing a Query</a></li>
<li class="chapter" data-level="10.1.3" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#faceting"><i class="fa fa-check"></i><b>10.1.3</b> Faceting</a></li>
<li class="chapter" data-level="10.1.4" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#stats"><i class="fa fa-check"></i><b>10.1.4</b> Stats</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#querying-solr-through-r"><i class="fa fa-check"></i><b>10.2</b> Querying Solr through R</a></li>
<li class="chapter" data-level="10.3" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#key-takeaways"><i class="fa fa-check"></i><b>10.3</b> Key takeaways</a></li>
<li class="chapter" data-level="10.4" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#more-resources"><i class="fa fa-check"></i><b>10.4</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html"><i class="fa fa-check"></i><b>11</b> Nesting a data package</a><ul>
<li class="chapter" data-level="11.1" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#introduction-1"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#create-a-new-parent-package"><i class="fa fa-check"></i><b>11.2</b> Create a new parent package</a></li>
<li class="chapter" data-level="11.3" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#add-children-to-an-existing-parent"><i class="fa fa-check"></i><b>11.3</b> Add children to an existing parent</a></li>
<li class="chapter" data-level="11.4" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#example"><i class="fa fa-check"></i><b>11.4</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="building-provenance.html"><a href="building-provenance.html"><i class="fa fa-check"></i><b>12</b> Building Provenance</a><ul>
<li class="chapter" data-level="12.1" data-path="building-provenance.html"><a href="building-provenance.html#introduction-2"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="building-provenance.html"><a href="building-provenance.html#the-prov-editor"><i class="fa fa-check"></i><b>12.2</b> The Prov Editor</a></li>
<li class="chapter" data-level="12.3" data-path="building-provenance.html"><a href="building-provenance.html#understanding-resource-maps"><i class="fa fa-check"></i><b>12.3</b> Understanding resource maps</a></li>
<li class="chapter" data-level="12.4" data-path="building-provenance.html"><a href="building-provenance.html#datapack"><i class="fa fa-check"></i><b>12.4</b> <code>datapack</code></a><ul>
<li class="chapter" data-level="12.4.1" data-path="building-provenance.html"><a href="building-provenance.html#fixing-mistakes"><i class="fa fa-check"></i><b>12.4.1</b> Fixing mistakes</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="building-provenance.html"><a href="building-provenance.html#references"><i class="fa fa-check"></i><b>12.5</b> References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://nceas.github.io/datateam-training/reference" target="blank">Reference Guide</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NCEAS Data Team Training</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="building-provenance" class="section level1">
<h1><span class="header-section-number">Chapter 12</span> Building Provenance</h1>
<div id="introduction-2" class="section level2">
<h2><span class="header-section-number">12.1</span> Introduction</h2>
<p>The provenance chain describes the origin and processing history of data. Provenance can exist on a continuum, ranging from prose descriptions of the history, to formal provenance traces, to fully executable environments. In this section we will describe how to build provenance using formal provenance traces in DataONE.</p>
<p>Provenance is becoming increasingly important in the face of what is being called a reproducibility crisis in science. J. P. A. Ioannidis (2005) wrote that “Most Research Findings Are False for Most Research Designs and for Most Fields”. Ioannidis outlined ways in which the research process has lead to inflated effect sizes and hypothesis tests that codify existing biases.</p>
<p>The first step towards addressing these issues is to be able to evaluate the data, analyses, and models on which conclusions are drawn. Under current practice, this can be difficult because data are typically unavailable, the method sections of papers do not detail the computational approaches used, and analyses and models are often conducted in graphical programs, or, when scripted analyses are employed, the code is not available.</p>
<p>And yet, this is easily remedied. Researchers can achieve computational reproducibility through open science approaches, including straightforward steps for archiving data and code openly along with the scientific workflows describing the provenance of scientific results (e.g., Hampton et al. (2015), Munafò et al. (2017)).</p>
<p>At NCEAS and in the datateam, not only do we archive data and code openly, but we also describe the workflows that involve that data and code using provenance, formalizing the provenance trace for a workflow that might look like this <img src="images/workflow.png" alt="workflow" /> into an easily understandable trace including archived data objects, such as what is shown <a href="https://goa.nceas.ucsb.edu/#view/urn:uuid:3249ada0-afe3-4dd6-875e-0f7928a4c171">here</a>.</p>
<p>There are two ways that we add provenance in the datateam - the prov editor and the R <code>datapack</code> package.</p>
</div>
<div id="the-prov-editor" class="section level2">
<h2><span class="header-section-number">12.2</span> The Prov Editor</h2>
<p>Provenance can easily be added to production Arctic Data Center packages using the provenance editor on <a href="beta.arcticdata.io" class="uri">beta.arcticdata.io</a>. On the landing page of a data package within beta, in the <code>dataTable</code> or <code>otherEntity</code> section where you would like to add a provenance relationship, you can choose to add either a “source” or a “derivation”, to the left or right of the object pane, respectively.</p>
<div class="figure">
<img src="images/add_prov.png" alt="add prov" />
<p class="caption">add prov</p>
</div>
<p>To add a source data file, click on the circle with the “+ add” text. Similarly, a source script would be added by selecting the arrow. Selecting the circle to add a source file pulls up the following screen, where you can select the source from other data objects within the same data package. <img src="images/add_source.png" alt="add source" /></p>
<p>A data package with an object that has multiple sources added will look like this. <img src="images/prov_sources.png" alt="sources" /></p>
<p>For simple packages on the Arctic Data Center, adding prov through the prov editor at <a href="beta.arcticdata.io" class="uri">beta.arcticdata.io</a> is super easy!</p>
</div>
<div id="understanding-resource-maps" class="section level2">
<h2><span class="header-section-number">12.3</span> Understanding resource maps</h2>
<p>Before we dive further into constructing prov in R, we need to talk more about resource maps.</p>
<p>All Data Packages have a single Resource Map. But what is a Resource Map and how do we use one to find out what Objects are in a particular Data Package? This document is a short introduction but a more complete guide can be found <a href="https://releases.dataone.org/online/api-documentation-v2.0/design/DataPackage.html?highlight=resource%20map">here</a>.</p>
<p>A Resource Map is a special kind of XML document that describes (amongst other things) an Aggregation. The Aggregation describes the members of a Data Package (metadata and data, usually). We can use the <code>dataone</code> R package to download a Resource Map if we know its PID:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dataone)

mn &lt;-<span class="st"> </span><span class="kw">MNode</span>(<span class="st">&quot;https://test.arcticdata.io/metacat/d1/mn/v2&quot;</span>)
pid &lt;-<span class="st"> &quot;urn:uuid:82bd7d7f-9e18-4fd2-8bda-99b1fddab556&quot;</span> <span class="co"># A Resource Map PID</span>

path &lt;-<span class="st"> </span><span class="kw">tempfile</span>(<span class="dt">fileext =</span> <span class="st">&quot;.xml&quot;</span>) <span class="co"># We&#39;re saving to a temporary file but you can save elsewhere</span>
<span class="kw">writeLines</span>(<span class="kw">rawToChar</span>(<span class="kw">getObject</span>(mn, pid)), path) <span class="co"># Write the object to `path`</span></code></pre>
<p>If we open that file up on a text editor, we see this:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;rdf:RDF xmlns:cito=&quot;http://purl.org/spar/cito/&quot; xmlns:dc=&quot;http://purl.org/dc/elements/1.1/&quot; xmlns:dcterms=&quot;http://purl.org/dc/terms/&quot; xmlns:foaf=&quot;http://xmlns.com/foaf/0.1/&quot; xmlns:ore=&quot;http://www.openarchives.org/ore/terms/&quot; xmlns:prov=&quot;http://www.w3.org/ns/prov#&quot; xmlns:provone=&quot;http://purl.dataone.org/provone/2015/01/15/ontology#&quot; xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot; xmlns:rdfs=&quot;http://www.w3.org/2000/01/rdf-schema#&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema#&quot;&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A61b48e72-ea29-4ba5-8131-4f59a9ebcd27&quot;&gt;
    &lt;cito:isDocumentedBy rdf:resource=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3Ac59b7505-39e6-4def-bc82-b67a8d117ce5&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556#aggregation&quot;&gt;
    &lt;rdf:type rdf:resource=&quot;http://www.openarchives.org/ore/terms/Aggregation&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3Ac59b7505-39e6-4def-bc82-b67a8d117ce5&quot;&gt;
    &lt;cito:isDocumentedBy rdf:resource=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3Ac59b7505-39e6-4def-bc82-b67a8d117ce5&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3Ac59b7505-39e6-4def-bc82-b67a8d117ce5&quot;&gt;
    &lt;cito:documents rdf:resource=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A61b48e72-ea29-4ba5-8131-4f59a9ebcd27&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3Ac59b7505-39e6-4def-bc82-b67a8d117ce5&quot;&gt;
    &lt;cito:documents rdf:resource=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3Ac59b7505-39e6-4def-bc82-b67a8d117ce5&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A61b48e72-ea29-4ba5-8131-4f59a9ebcd27&quot;&gt;
    &lt;ore:isAggregatedBy rdf:resource=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556#aggregation&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556#aggregation&quot;&gt;
    &lt;dc:title&gt;DataONE Aggregation&lt;/dc:title&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556&quot;&gt;
    &lt;dcterms:identifier rdf:datatype=&quot;http://www.w3.org/2001/XMLSchema#string&quot;&gt;urn:uuid:82bd7d7f-9e18-4fd2-8bda-99b1fddab556&lt;/dcterms:identifier&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556&quot;&gt;
    &lt;ore:describes rdf:resource=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556#aggregation&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3Ac59b7505-39e6-4def-bc82-b67a8d117ce5&quot;&gt;
    &lt;ore:isAggregatedBy rdf:resource=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556#aggregation&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556#aggregation&quot;&gt;
    &lt;ore:aggregates rdf:resource=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A61b48e72-ea29-4ba5-8131-4f59a9ebcd27&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556#aggregation&quot;&gt;
    &lt;ore:aggregates rdf:resource=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3Ac59b7505-39e6-4def-bc82-b67a8d117ce5&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556&quot;&gt;
    &lt;rdf:type rdf:resource=&quot;http://www.openarchives.org/ore/terms/ResourceMap&quot;/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A61b48e72-ea29-4ba5-8131-4f59a9ebcd27&quot;&gt;
    &lt;dcterms:identifier rdf:datatype=&quot;http://www.w3.org/2001/XMLSchema#string&quot;&gt;urn:uuid:61b48e72-ea29-4ba5-8131-4f59a9ebcd27&lt;/dcterms:identifier&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3Ac59b7505-39e6-4def-bc82-b67a8d117ce5&quot;&gt;
    &lt;dcterms:identifier rdf:datatype=&quot;http://www.w3.org/2001/XMLSchema#string&quot;&gt;urn:uuid:c59b7505-39e6-4def-bc82-b67a8d117ce5&lt;/dcterms:identifier&gt;
  &lt;/rdf:Description&gt;
&lt;/rdf:RDF&gt;</code></pre>
<p>Whoa. What is this thing and how do you read it? The short of it is that, if you want to find the members of the Data Package, you want to look for lines like this:</p>
<pre><code>&lt;rdf:Description rdf:about=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3A82bd7d7f-9e18-4fd2-8bda-99b1fddab556#aggregation&quot;&gt;
    &lt;ore:aggregates rdf:resource=&quot;https://cn.dataone.org/cn/v2/resolve/urn%3Auuid%3Ac59b7505-39e6-4def-bc82-b67a8d117ce5&quot;/&gt;</code></pre>
<p>This line says “The Aggregation aggregates <code>urn:uuid:c59b7505-39e6-4def-bc82-b67a8d117ce5</code>” so that means <code>urn:uuid:c59b7505-39e6-4def-bc82-b67a8d117ce5</code> is in our Data Package! The key bit is the <code>&lt;rdf:Description rdf:about=&quot;...#aggregation</code> part. If you look for another similar statement, you’ll also see that <code>urn:uuid:61b48e72-ea29-4ba5-8131-4f59a9ebcd27</code> is part of our Data Package.</p>
<p>Now we know <em>which</em> Objects are in our Data Package but we don’t know which one is metadata and which one is data. For that, we need to get a copy of the System Metadata for each object:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dataone)

mn &lt;-<span class="st"> </span><span class="kw">MNode</span>(<span class="st">&quot;https://test.arcticdata.io/metacat/d1/mn/v2&quot;</span>)
<span class="kw">getSystemMetadata</span>(mn, <span class="st">&quot;urn:uuid:c59b7505-39e6-4def-bc82-b67a8d117ce5&quot;</span>)<span class="op">@</span>formatId
[<span class="dv">1</span>] <span class="st">&quot;eml://ecoinformatics.org/eml-2.1.1&quot;</span>

<span class="kw">getSystemMetadata</span>(mn, <span class="st">&quot;urn:uuid:61b48e72-ea29-4ba5-8131-4f59a9ebcd27&quot;</span>)<span class="op">@</span>formatId
[<span class="dv">1</span>] <span class="st">&quot;application/octet-stream&quot;</span></code></pre>
<p>From the format IDs, we can see the first PID is metadata and the second PID is data. Now we know enough to know what’s in the Data Package:</p>
<ul>
<li>Resource Map: <a href="urn:uuid:82bd7d7f-9e18-4fd2-8bda-99b1fddab556" class="uri">urn:uuid:82bd7d7f-9e18-4fd2-8bda-99b1fddab556</a></li>
<li>Metadata: <a href="urn:uuid:c59b7505-39e6-4def-bc82-b67a8d117ce5" class="uri">urn:uuid:c59b7505-39e6-4def-bc82-b67a8d117ce5</a></li>
<li>Data: <a href="urn:uuid:61b48e72-ea29-4ba5-8131-4f59a9ebcd27" class="uri">urn:uuid:61b48e72-ea29-4ba5-8131-4f59a9ebcd27</a></li>
</ul>
<p>Now that you’ve actually seen a resource map, we can dive further into prov.</p>
</div>
<div id="datapack" class="section level2">
<h2><span class="header-section-number">12.4</span> <code>datapack</code></h2>
<p>For packages not on the ADC, or packages that are extremely complicated, it may be best to upload prov relationships using R. The <code>datapack</code> package has several functions which help add relationships in a very simple way. These relationships are stored in the resource map. When you update a package just by adding prov, the package will not get any new identifiers with the exception of the resource map.</p>
<p>First, we set the environment, in a similar, but slightly different way than what you may be used to. Here the function <code>D1Client</code> sets the DataONE client with the coordinating node instance as the first argument, and membernode as the second argument.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dataone)
<span class="kw">library</span>(datapack)
d1c &lt;-<span class="st"> </span><span class="kw">D1Client</span>(<span class="st">&quot;STAGING2&quot;</span>, <span class="st">&quot;urn:node:mnTestKNB&quot;</span>)</code></pre>
<p>Next, get the pid of the resource map of the data package you are adding prov to, and load that package into R using the <code>getDataPackage</code> function.</p>
<pre class="sourceCode r"><code class="sourceCode r">resmapId &lt;-<span class="st"> &quot;urn:uuid:8f501606-2c13-4454-b22d-050a4176a97b&quot;</span>
pkg &lt;-<span class="st"> </span><span class="kw">getDataPackage</span>(d1c, <span class="dt">id=</span>resmapId, <span class="dt">lazyLoad=</span><span class="ot">TRUE</span>, <span class="dt">limit=</span><span class="st">&quot;0MB&quot;</span>, <span class="dt">quiet=</span><span class="ot">FALSE</span>)</code></pre>
<p>Printing <code>pkg</code> in your console shows you the contents of the data package, including all of the objects and their names:</p>
<pre><code>&gt; pkg
Members:

filename   format         mediaType  size     identifier                                    modified local 
esc...er.R application/R  NA         888      knb.92049.1                                   n        n     
PWS....csv text/csv       NA         1871469  knb.92050.1                                   n        n     
PWS....csv text/csv       NA         1508128  knb.92051.1                                   n        n     
NA         eml:/...-2.1.1 NA         15658    urn:uuid:8f501606-2c13-4454-b22d-050a4176a97b n        y     

Package identifier: resource_map_urn:uuid:8f501606-2c13-4454-b22d-050a4176a97b
RightsHolder: http://orcid.org/0000-0002-2192-403X</code></pre>
<p>It will also show the existing relationships in the resource map, which in this case are mostly the “documents” relationships that specify that the metadata record is describing all of these data files.</p>
<pre><code>Relationships:
                                   subject           predicate                                   object
2          esc_reformatting_PWSweirTower.R cito:isDocumentedBy urn:uuid:8f501606-...4-b22d-050a4176a97b
4                        PWS_weirTower.csv cito:isDocumentedBy urn:uuid:8f501606-...4-b22d-050a4176a97b
1                PWS_Weir_Tower_export.csv cito:isDocumentedBy urn:uuid:8f501606-...4-b22d-050a4176a97b
3 urn:uuid:8f501606-...4-b22d-050a4176a97b     dcterms:creator                    _r1515542097r415842r1
5 urn:uuid:8f501606-...4-b22d-050a4176a97b      cito:documents          esc_reformatting_PWSweirTower.R
6 urn:uuid:8f501606-...4-b22d-050a4176a97b      cito:documents                        PWS_weirTower.csv
7 urn:uuid:8f501606-...4-b22d-050a4176a97b      cito:documents                PWS_Weir_Tower_export.csv
8 urn:uuid:8f501606-...4-b22d-050a4176a97b      cito:documents urn:uuid:8f501606-...4-b22d-050a4176a97b
9 urn:uuid:8f501606-...4-b22d-050a4176a97b cito:isDocumentedBy urn:uuid:8f501606-...4-b22d-050a4176a97b</code></pre>
<p>In this example above, the data package has two .csv files, with an R script that converts one to the other. To create our provenance trace, first we need to select the source object, and save the pid to a variable. We do this using the <code>selectMember</code> function, and we can query part of the system metadata to select the file that we want. This function takes the data package (<code>pkg</code>), the name of the sysmeta field to query (in this case we use the <code>fileName</code>), and the value that you want to match that field to (in this case, ‘PWS_Weir_Tower_export.csv’).</p>
<pre class="sourceCode r"><code class="sourceCode r">sourceObjId &lt;-<span class="st"> </span><span class="kw">selectMember</span>(pkg, <span class="dt">name=</span><span class="st">&quot;sysmeta@fileName&quot;</span>, <span class="dt">value=</span><span class="st">&#39;PWS_Weir_Tower_export.csv&#39;</span>)</code></pre>
<p>This returns a list of the source object pids that match the query (in this case only one object matches).</p>
<pre><code>&gt; sourceObjId
[1] &quot;knb.92051.1&quot;</code></pre>
<p>Now we need to select our output object. Here, we use the <code>selectMember</code> function again, and save the result to a new variable.</p>
<pre class="sourceCode r"><code class="sourceCode r">outputObjId &lt;-<span class="st"> </span><span class="kw">selectMember</span>(pkg, <span class="dt">name=</span><span class="st">&quot;sysmeta@fileName&quot;</span>, <span class="dt">value=</span><span class="st">&#39;PWS_weirTower.csv&#39;</span>)</code></pre>
<p>Now we query for the R script. In this case, we query based on the value of the <code>formatId</code> as opposed to the filename. This can be useful if you wish to select a large list of pids that are all similar.</p>
<pre class="sourceCode r"><code class="sourceCode r">programObjId &lt;-<span class="st"> </span><span class="kw">selectMember</span>(pkg, <span class="dt">name=</span><span class="st">&quot;sysmeta@formatId&quot;</span>, <span class="dt">value=</span><span class="st">&quot;application/R&quot;</span>)</code></pre>
<p>Next, you use these lists of pids and a function called <code>describeWorkflow</code> to add these relationships to the data package. Note that if you do not have a program in the workflow, or a source file, you can simply leave those arguments blank.</p>
<pre class="sourceCode r"><code class="sourceCode r">pkg &lt;-<span class="st"> </span><span class="kw">describeWorkflow</span>(pkg, <span class="dt">sources=</span>sourceObjId, <span class="dt">program=</span>programObjId, <span class="dt">derivations=</span>outputObjId)</code></pre>
<p>Viewing <code>pkg</code> again confirms that these relationships have been inserted into the data package, as shown by the “wasDerivedFrom” and “wasGeneratedBy” statements. It is always a good idea to print <code>pkg</code> to confirm that your pid selection process worked as expected, and your prov relationships make sense.</p>
<pre><code>Relationships (updated):

                                subject                 predicate                               object
15 _1db49d06-ae98-4...9101-39f7c0b45a95                  rdf:type                     prov:Association
14 _1db49d06-ae98-4...9101-39f7c0b45a95              prov:hadPlan      esc_reformatting_PWSweirTower.R
1       esc_reformatting_PWSweirTower.R       cito:isDocumentedBy urn:uuid:8f50160...b22d-050a4176a97b
16      esc_reformatting_PWSweirTower.R                  rdf:type                      provone:Program
8                     PWS_weirTower.csv       cito:isDocumentedBy urn:uuid:8f50160...b22d-050a4176a97b
11                    PWS_weirTower.csv                  rdf:type                         provone:Data
20                    PWS_weirTower.csv       prov:wasDerivedFrom            PWS_Weir_Tower_export.csv
19                    PWS_weirTower.csv       prov:wasGeneratedBy urn:uuid:3dd59b0...bc38-3b5d8fa644ac
6             PWS_Weir_Tower_export.csv       cito:isDocumentedBy urn:uuid:8f50160...b22d-050a4176a97b
10            PWS_Weir_Tower_export.csv                  rdf:type                         provone:Data
9                 _r1515544826r415842r1                 foaf:name                     DataONE R Client
17 urn:uuid:3dd59b0...bc38-3b5d8fa644ac        dcterms:identifier urn:uuid:3dd59b0...bc38-3b5d8fa644ac
13 urn:uuid:3dd59b0...bc38-3b5d8fa644ac                  rdf:type                    provone:Execution
12 urn:uuid:3dd59b0...bc38-3b5d8fa644ac prov:qualifiedAssociation _1db49d06-ae98-4...9101-39f7c0b45a95
18 urn:uuid:3dd59b0...bc38-3b5d8fa644ac                 prov:used            PWS_Weir_Tower_export.csv
5  urn:uuid:8f50160...b22d-050a4176a97b            cito:documents      esc_reformatting_PWSweirTower.R
4  urn:uuid:8f50160...b22d-050a4176a97b            cito:documents                    PWS_weirTower.csv
3  urn:uuid:8f50160...b22d-050a4176a97b            cito:documents            PWS_Weir_Tower_export.csv
2  urn:uuid:8f50160...b22d-050a4176a97b            cito:documents urn:uuid:8f50160...b22d-050a4176a97b
7  urn:uuid:8f50160...b22d-050a4176a97b       cito:isDocumentedBy urn:uuid:8f50160...b22d-050a4176a97b</code></pre>
<p>Finally, you can upload the data package using the <code>uploadDataPackage</code> function, which takes the DataONE client <code>d1c</code> we set in the beginning, the updated <code>pkg</code> variable, and some options for public read and whether informational messages are printed during the upload process.</p>
<pre class="sourceCode r"><code class="sourceCode r">resmapId_new &lt;-<span class="st"> </span><span class="kw">uploadDataPackage</span>(d1c, pkg, <span class="dt">public=</span><span class="ot">TRUE</span>, <span class="dt">quiet=</span><span class="ot">FALSE</span>)</code></pre>
<p>If successful you should be able to navigate to the landing page of your dataset, and icons should show up where the sources and derivations are, such as in this example <img src="images/prov_inputoutput.png" alt="prov_works" /></p>
<div id="fixing-mistakes" class="section level3">
<h3><span class="header-section-number">12.4.1</span> Fixing mistakes</h3>
<p>If you messed up updating a datapackage using <code>datapack</code>, there unfortunately isn’t a great way to undo your work, as the <code>describeWorkflow</code> only adds prov relationships, it does not replace them. If you messed up, the best course of action is to update the resource map with a clean version that does not have prov using <code>update_resource_map</code>, and then go through the steps outlined above again.</p>
<p>Note: this has not been thorougly tested, and more extreme actions may be necessary to fully nuke the prov relationships. See Jeanette if things do not work as expected.</p>
</div>
</div>
<div id="references" class="section level2">
<h2><span class="header-section-number">12.5</span> References</h2>
<p>Ioannidis, John P A. 2005. “Why Most Published Research Findings Are False.” PLoS Medicine 2 (8): e124. <a href="doi:10.1371/journal.pmed.0020124" class="uri">doi:10.1371/journal.pmed.0020124</a>.</p>
<p>Hampton, Stephanie E, Sean Anderson, Sarah C Bagby, Corinna Gries, Xueying Han, Edmund Hart, Matthew B Jones, et al. 2015. “The Tao of Open Science for Ecology.” Ecosphere 6 (July). <a href="doi:http://dx.doi.org/10.1890/ES14-00402.1" class="uri">doi:http://dx.doi.org/10.1890/ES14-00402.1</a>.</p>
<p>Munafò, Marcus R., Brian A. Nosek, Dorothy V. M. Bishop, Katherine S. Button, Christopher D. Chambers, Nathalie Percie du Sert, Uri Simonsohn, Eric-Jan Wagenmakers, Jennifer J. Ware, and John P. A. Ioannidis. 2017. “A Manifesto for Reproducible Science.” Nature Human Behaviour 1 (1): 0021. <a href="doi:10.1038/s41562-016-0021" class="uri">doi:10.1038/s41562-016-0021</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="nesting-a-data-package.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
