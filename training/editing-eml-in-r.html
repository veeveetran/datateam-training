<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>NCEAS Data Team Training</title>
  <meta name="description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center Projects">
  <meta name="generator" content="bookdown 0.7.7 and GitBook 2.6.7">

  <meta property="og:title" content="NCEAS Data Team Training" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center Projects" />
  <meta name="github-repo" content="rstudio/datateam-training" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="NCEAS Data Team Training" />
  
  <meta name="twitter:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center Projects" />
  

<meta name="author" content="Jeanette Clark, Jesse Goldstein, Dominic Mullen, Bryce Mecum, Matt Jones, Peter Slaughter, Irene Steves, Mitchell Maier">


<meta name="date" content="2018-04-12">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="explore-eml.html">
<link rel="next" href="system-metadata.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="../styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Team Training</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to NCEAS!</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#first-day-to-dos"><i class="fa fa-check"></i><b>1.1</b> First day to-dos</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#account-information"><i class="fa fa-check"></i><b>1.2</b> Account information</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#nceas-events"><i class="fa fa-check"></i><b>1.3</b> NCEAS Events</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html"><i class="fa fa-check"></i><b>2</b> Introduction to open science</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#open-science-background-reading"><i class="fa fa-check"></i><b>2.1</b> Open science background reading</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#effective-data-management"><i class="fa fa-check"></i><b>2.2</b> Effective data management</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#using-dataone"><i class="fa fa-check"></i><b>2.3</b> Using DataONE</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#working-on-a-remote-server"><i class="fa fa-check"></i><b>2.4</b> Working on a remote server</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#cyberduck-instructions"><i class="fa fa-check"></i><b>2.5</b> Cyberduck instructions</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-paths"><i class="fa fa-check"></i><b>2.6</b> A note on paths</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-scripts"><i class="fa fa-check"></i><b>2.7</b> A note on scripts</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#exercise-1"><i class="fa fa-check"></i><b>2.8</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html"><i class="fa fa-check"></i><b>3</b> Create data packages in R</a><ul>
<li class="chapter" data-level="3.1" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#what-is-in-a-package"><i class="fa fa-check"></i><b>3.1</b> What is in a package?</a></li>
<li class="chapter" data-level="3.2" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#about-identifiers"><i class="fa fa-check"></i><b>3.2</b> About identifiers</a></li>
<li class="chapter" data-level="3.3" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#uploading-packages-using-r"><i class="fa fa-check"></i><b>3.3</b> Uploading packages using R</a></li>
<li class="chapter" data-level="3.4" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#set-dataone-nodes"><i class="fa fa-check"></i><b>3.4</b> Set DataONE nodes</a><ul>
<li class="chapter" data-level="3.4.1" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#test-nodes"><i class="fa fa-check"></i><b>3.4.1</b> Test nodes</a></li>
<li class="chapter" data-level="3.4.2" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#production-nodes"><i class="fa fa-check"></i><b>3.4.2</b> Production nodes</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#publish-an-object"><i class="fa fa-check"></i><b>3.5</b> Publish an object</a></li>
<li class="chapter" data-level="3.6" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#create-a-resource-map"><i class="fa fa-check"></i><b>3.6</b> Create a resource map</a></li>
<li class="chapter" data-level="3.7" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#exercise-2"><i class="fa fa-check"></i><b>3.7</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="update-a-data-package.html"><a href="update-a-data-package.html"><i class="fa fa-check"></i><b>4</b> Update a data package</a><ul>
<li class="chapter" data-level="4.1" data-path="update-a-data-package.html"><a href="update-a-data-package.html#get-package-and-eml"><i class="fa fa-check"></i><b>4.1</b> Get package and EML</a></li>
<li class="chapter" data-level="4.2" data-path="update-a-data-package.html"><a href="update-a-data-package.html#update-an-object"><i class="fa fa-check"></i><b>4.2</b> Update an object</a></li>
<li class="chapter" data-level="4.3" data-path="update-a-data-package.html"><a href="update-a-data-package.html#update-a-package"><i class="fa fa-check"></i><b>4.3</b> Update a package</a><ul>
<li class="chapter" data-level="4.3.1" data-path="update-a-data-package.html"><a href="update-a-data-package.html#updating-metadata"><i class="fa fa-check"></i><b>4.3.1</b> Updating metadata</a></li>
<li class="chapter" data-level="4.3.2" data-path="update-a-data-package.html"><a href="update-a-data-package.html#updating-data"><i class="fa fa-check"></i><b>4.3.2</b> Updating data</a></li>
<li class="chapter" data-level="4.3.3" data-path="update-a-data-package.html"><a href="update-a-data-package.html#publish-update"><i class="fa fa-check"></i><b>4.3.3</b> Publish update</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="update-a-data-package.html"><a href="update-a-data-package.html#exercise-3"><i class="fa fa-check"></i><b>4.4</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="explore-eml.html"><a href="explore-eml.html"><i class="fa fa-check"></i><b>5</b> Explore EML</a><ul>
<li class="chapter" data-level="5.0.1" data-path="explore-eml.html"><a href="explore-eml.html#understand-the-eml-schema"><i class="fa fa-check"></i><b>5.0.1</b> Understand the EML schema</a></li>
<li class="chapter" data-level="5.0.2" data-path="explore-eml.html"><a href="explore-eml.html#access-specific-elements"><i class="fa fa-check"></i><b>5.0.2</b> Access specific elements</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html"><i class="fa fa-check"></i><b>6</b> Editing EML in R</a><ul>
<li class="chapter" data-level="6.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-an-eml-element"><i class="fa fa-check"></i><b>6.1</b> Edit an EML element</a><ul>
<li class="chapter" data-level="6.1.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-eml-with-strings"><i class="fa fa-check"></i><b>6.1.1</b> Edit EML with strings</a></li>
<li class="chapter" data-level="6.1.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-eml-with-eml"><i class="fa fa-check"></i><b>6.1.2</b> Edit EML with EML</a></li>
<li class="chapter" data-level="6.1.3" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-eml-with-objects"><i class="fa fa-check"></i><b>6.1.3</b> Edit EML with objects</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-attributelists"><i class="fa fa-check"></i><b>6.2</b> Edit attributeLists</a><ul>
<li class="chapter" data-level="6.2.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-attributes"><i class="fa fa-check"></i><b>6.2.1</b> Edit Attributes</a></li>
<li class="chapter" data-level="6.2.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-custom-units"><i class="fa fa-check"></i><b>6.2.2</b> Edit Custom Units</a></li>
<li class="chapter" data-level="6.2.3" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-factors"><i class="fa fa-check"></i><b>6.2.3</b> Edit Factors</a></li>
<li class="chapter" data-level="6.2.4" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#finalize-attributelist"><i class="fa fa-check"></i><b>6.2.4</b> Finalize attributeList</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-physical"><i class="fa fa-check"></i><b>6.3</b> Set physical</a></li>
<li class="chapter" data-level="6.4" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-datatables"><i class="fa fa-check"></i><b>6.4</b> Edit dataTables</a></li>
<li class="chapter" data-level="6.5" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-otherentities"><i class="fa fa-check"></i><b>6.5</b> Edit otherEntities</a><ul>
<li class="chapter" data-level="6.5.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#remove-otherentities"><i class="fa fa-check"></i><b>6.5.1</b> Remove otherEntities</a></li>
<li class="chapter" data-level="6.5.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#create-otherentities"><i class="fa fa-check"></i><b>6.5.2</b> Create otherEntities</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-coverages"><i class="fa fa-check"></i><b>6.6</b> Set coverages</a></li>
<li class="chapter" data-level="6.7" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-methods"><i class="fa fa-check"></i><b>6.7</b> Set methods</a></li>
<li class="chapter" data-level="6.8" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-parties"><i class="fa fa-check"></i><b>6.8</b> Set parties</a></li>
<li class="chapter" data-level="6.9" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#exercise-4"><i class="fa fa-check"></i><b>6.9</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="system-metadata.html"><a href="system-metadata.html"><i class="fa fa-check"></i><b>7</b> System metadata</a><ul>
<li class="chapter" data-level="7.1" data-path="system-metadata.html"><a href="system-metadata.html#edit-sysmeta"><i class="fa fa-check"></i><b>7.1</b> Edit sysmeta</a><ul>
<li class="chapter" data-level="7.1.1" data-path="system-metadata.html"><a href="system-metadata.html#identifiers-and-sysmeta"><i class="fa fa-check"></i><b>7.1.1</b> Identifiers and sysmeta</a></li>
<li class="chapter" data-level="7.1.2" data-path="system-metadata.html"><a href="system-metadata.html#additional-resources"><i class="fa fa-check"></i><b>7.1.2</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="system-metadata.html"><a href="system-metadata.html#set-rights-and-access"><i class="fa fa-check"></i><b>7.2</b> Set rights and access</a><ul>
<li class="chapter" data-level="7.2.1" data-path="system-metadata.html"><a href="system-metadata.html#exercise-5"><i class="fa fa-check"></i><b>7.2.1</b> Exercise 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html"><i class="fa fa-check"></i><b>8</b> Using Git in RStudio</a><ul>
<li class="chapter" data-level="8.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#introduction"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="8.1.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#so-why-do-i-need-to-use-this-again"><i class="fa fa-check"></i><b>8.1.1</b> So why do I need to use this again?</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#setting-up-git"><i class="fa fa-check"></i><b>8.2</b> Setting up git</a><ul>
<li class="chapter" data-level="8.2.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#cloning-the-arctic-data-repo"><i class="fa fa-check"></i><b>8.2.1</b> Cloning the arctic-data repo</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#working-with-the-repository"><i class="fa fa-check"></i><b>8.3</b> Working with the repository</a><ul>
<li class="chapter" data-level="8.3.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#adding-a-new-script"><i class="fa fa-check"></i><b>8.3.1</b> Adding a new script</a></li>
<li class="chapter" data-level="8.3.2" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#editing-a-script"><i class="fa fa-check"></i><b>8.3.2</b> Editing a script</a></li>
<li class="chapter" data-level="8.3.3" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#where-do-i-commit"><i class="fa fa-check"></i><b>8.3.3</b> Where do I commit?</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#my-git-tab-disappeared"><i class="fa fa-check"></i><b>8.4</b> My Git tab disappeared</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="using-rt.html"><a href="using-rt.html"><i class="fa fa-check"></i><b>9</b> Using RT</a><ul>
<li class="chapter" data-level="9.1" data-path="using-rt.html"><a href="using-rt.html#navigate-rt"><i class="fa fa-check"></i><b>9.1</b> Navigate RT</a><ul>
<li class="chapter" data-level="9.1.1" data-path="using-rt.html"><a href="using-rt.html#front-page"><i class="fa fa-check"></i><b>9.1.1</b> Front page</a></li>
<li class="chapter" data-level="9.1.2" data-path="using-rt.html"><a href="using-rt.html#all-tickets"><i class="fa fa-check"></i><b>9.1.2</b> All tickets</a></li>
<li class="chapter" data-level="9.1.3" data-path="using-rt.html"><a href="using-rt.html#example-ticket"><i class="fa fa-check"></i><b>9.1.3</b> Example ticket</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html"><i class="fa fa-check"></i><b>10</b> Introduction to Solr</a><ul>
<li class="chapter" data-level="10.1" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#querying-solr"><i class="fa fa-check"></i><b>10.1</b> Querying Solr</a><ul>
<li class="chapter" data-level="10.1.1" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#parts-of-a-query"><i class="fa fa-check"></i><b>10.1.1</b> Parts of a Query</a></li>
<li class="chapter" data-level="10.1.2" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#constructing-a-query"><i class="fa fa-check"></i><b>10.1.2</b> Constructing a Query</a></li>
<li class="chapter" data-level="10.1.3" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#faceting"><i class="fa fa-check"></i><b>10.1.3</b> Faceting</a></li>
<li class="chapter" data-level="10.1.4" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#stats"><i class="fa fa-check"></i><b>10.1.4</b> Stats</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#querying-solr-through-r"><i class="fa fa-check"></i><b>10.2</b> Querying Solr through R</a></li>
<li class="chapter" data-level="10.3" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#key-takeaways"><i class="fa fa-check"></i><b>10.3</b> Key takeaways</a></li>
<li class="chapter" data-level="10.4" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#more-resources"><i class="fa fa-check"></i><b>10.4</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html"><i class="fa fa-check"></i><b>11</b> Nesting a data package</a><ul>
<li class="chapter" data-level="11.1" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#introduction-1"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#create-a-new-parent-package"><i class="fa fa-check"></i><b>11.2</b> Create a new parent package</a></li>
<li class="chapter" data-level="11.3" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#add-children-to-an-existing-parent"><i class="fa fa-check"></i><b>11.3</b> Add children to an existing parent</a></li>
<li class="chapter" data-level="11.4" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#example"><i class="fa fa-check"></i><b>11.4</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="building-provenance.html"><a href="building-provenance.html"><i class="fa fa-check"></i><b>12</b> Building Provenance</a><ul>
<li class="chapter" data-level="12.1" data-path="building-provenance.html"><a href="building-provenance.html#introduction-2"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="building-provenance.html"><a href="building-provenance.html#the-prov-editor"><i class="fa fa-check"></i><b>12.2</b> The Prov Editor</a></li>
<li class="chapter" data-level="12.3" data-path="building-provenance.html"><a href="building-provenance.html#understanding-resource-maps"><i class="fa fa-check"></i><b>12.3</b> Understanding resource maps</a></li>
<li class="chapter" data-level="12.4" data-path="building-provenance.html"><a href="building-provenance.html#datapack"><i class="fa fa-check"></i><b>12.4</b> <code>datapack</code></a><ul>
<li class="chapter" data-level="12.4.1" data-path="building-provenance.html"><a href="building-provenance.html#fixing-mistakes"><i class="fa fa-check"></i><b>12.4.1</b> Fixing mistakes</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="building-provenance.html"><a href="building-provenance.html#references"><i class="fa fa-check"></i><b>12.5</b> References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://nceas.github.io/datateam-training/reference" target="blank">Reference Guide</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NCEAS Data Team Training</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="editing-eml-in-r" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Editing EML in R</h1>
<p>This chapter is a practical tutorial for using R to read, edit, write, and validate EML documents. Much of the information here can also be found in the vignettes for the R packages used in this section (e.g. the <a href="https://github.com/ropensci/EML/blob/master/vignettes/creating-EML.Rmd">EML package</a>).</p>
<p>Once you have an <a href="update-a-data-package.html#get-package-and-eml">eml file loaded into R</a>, you can use R to edit the eml file.</p>
<div id="edit-an-eml-element" class="section level2">
<h2><span class="header-section-number">6.1</span> Edit an EML element</h2>
<p>There are multiple ways to edit an EML element.</p>
<div id="edit-eml-with-strings" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Edit EML with strings</h3>
<p>The most basic way to edit an EML element would be to go into the eml schema to the location of a character string and then replace that character string with a new character string.</p>
<p>For example to change the title one could use the following commands.</p>
<pre class="sourceCode r"><code class="sourceCode r">new_title &lt;-<span class="st"> &quot;New Title&quot;</span>
eml<span class="op">@</span>dataset<span class="op">@</span>title[[<span class="dv">1</span>]]<span class="op">@</span>.Data &lt;-<span class="st"> </span>new_title</code></pre>
<p>However, this isn’t the best method to edit the EML unless you are an expert both in S4 objects and in the EML schema, since the nesting and lists of elements can get very complex.</p>
</div>
<div id="edit-eml-with-eml" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Edit EML with EML</h3>
<p>For editing simple text sections, a better option is to use <code>EML::read_eml</code>. To use this function, one would first run the slot that is in need of editing. For example, for a title this would involve calling</p>
<pre class="sourceCode r"><code class="sourceCode r">eml<span class="op">@</span>dataset<span class="op">@</span>title[[<span class="dv">1</span>]]</code></pre>
<p>and then copying the result. In this case, the result will be of the form <code>&lt;title&gt;Title Text Here&lt;/title&gt;</code>. To make a new title, one would replace the text between the <code>&lt;title&gt;&lt;/title&gt;</code> tags using a similar workflow as below.</p>
<pre class="sourceCode r"><code class="sourceCode r">new_title &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">read_eml</span>(<span class="st">&quot;&lt;title&gt;New Title 2&lt;/title&gt;&quot;</span>)
eml<span class="op">@</span>dataset<span class="op">@</span>title[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>new_title</code></pre>
<p>Note, without specifying which title with <code>[[1]]</code>, the following code will give you the error <code>Error in (function (cl, name, valueClass) : assignment of an object of class “title” is not valid for @‘title’ in an object of class “dataset”; is(value, &quot;ListOftitle&quot;) is not TRUE</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bad Example</span>
new_title &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">read_eml</span>(<span class="st">&quot;&lt;title&gt;New Title 2&lt;/title&gt;&quot;</span>)
eml<span class="op">@</span>dataset<span class="op">@</span>title &lt;-<span class="st"> </span>new_title</code></pre>
<p>The above gives an error because <code>eml@dataset@title</code> is a slot for a list and <code>new_title</code> is a single object. Therefore you must either specify which title you want to replace as was done above by specifying the first title in the list with <code>[[1]]</code> or turn <code>new_title</code> into a list/vector utilizing the <code>c()</code> command as follows.</p>
<pre class="sourceCode r"><code class="sourceCode r">new_title &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">read_eml</span>(<span class="st">&quot;&lt;title&gt;New Title 2&lt;/title&gt;&quot;</span>)
eml<span class="op">@</span>dataset<span class="op">@</span>title &lt;-<span class="st"> </span><span class="kw">c</span>(new_title)</code></pre>
<p>However, if there were multiple titles, the above would replace all the titles with the single title. This behavior may or may not be desirable so be careful.</p>
<p>One final note, a benefit of this method to edit EML objects is that <a href="#advanced-eml-text">advanced text features can be easily added using this workflow</a>.</p>
</div>
<div id="edit-eml-with-objects" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Edit EML with objects</h3>
<p>A final way to edit an EML element would be to build a new object to replace the old object. To begin, you must determine the class of the object you want to edit (generally this is just the schema name of the object). The function <code>class()</code> is helpful here. For example, if you want to edit <code>eml@dataset@title[[1]]</code> use the following command to find the class.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(eml<span class="op">@</span>dataset<span class="op">@</span>title[[<span class="dv">1</span>]])</code></pre>
<p>The result shows that this object has a class <code>title</code>. Therefore you must replace it with an object of class <code>title</code>. To do so use <code>as()</code>. To use <code>as()</code> input the the desired string followed by the desired <code>class</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">new_title &lt;-<span class="st"> </span><span class="kw">as</span>(<span class="st">&quot;New Title 3&quot;</span>, <span class="st">&quot;title&quot;</span>)

eml<span class="op">@</span>dataset<span class="op">@</span>title[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>new_title
<span class="co">#or</span>
eml<span class="op">@</span>dataset<span class="op">@</span>title &lt;-<span class="st"> </span><span class="kw">c</span>(new_title)</code></pre>
<p>Note, if you want to create an object with nested objects, you may have to use the command <code>new()</code> which is similar to <code>as()</code> but with the order of specifying values and class switched. See help on <a href="editing-eml-in-r.html#edit-datatables">editing datatables for an example of when to use <code>new()</code></a>.</p>
</div>
</div>
<div id="edit-attributelists" class="section level2">
<h2><span class="header-section-number">6.2</span> Edit attributeLists</h2>
<p>Attributes are stored in an <a href="https://github.com/NCEAS/eml/blob/master/eml-attribute.png">attributeList</a>. When editing attributes in R, you need to create one-three objects:</p>
<ol style="list-style-type: decimal">
<li>A data.frame of attributes</li>
<li>A data.frame of custom units (if applicable)</li>
<li>A data.frame of factors (if applicable)</li>
</ol>
<p>Note, to edit/examine an existing attribute table already in a eml file you can use the following commands.</p>
<pre class="sourceCode r"><code class="sourceCode r">attributeList &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">get_attributes</span>(eml<span class="op">@</span>dataset<span class="op">@</span>dataTable[[i]]<span class="op">@</span>attributeList)
attributes &lt;-<span class="st"> </span>attributeList<span class="op">$</span>attributes</code></pre>
<div id="edit-attributes" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Edit Attributes</h3>
<p>Attribute information should be stored in a <code>data.frame</code> with the following columns.</p>
<ul>
<li><strong>attributeName</strong>: The name of the attribute as listed in the csv. Required. e.g.: “c_temp”</li>
<li><strong>attributeLabel</strong>: A descriptive label that can be used to display the name of an attribute. It is not constrained by system limitations on length or special characters. Optional. e.g.: “Temperature (Celsius)”</li>
<li><strong>attributeDefinition</strong>: Longer description of the attribute, including the required context for interpreting the attributeName. Required. e.g.: “The near shore water temperature in the upper inter-tidal zone, measured in degrees Celsius.”</li>
<li><strong>measurementScale</strong>: One of: nominal, ordinal, dateTime, ratio, interval. Required.
<ul>
<li><em>nominal</em>: unordered categories or text. e.g.: (Male, Female) or (Yukon River, Kuskokwim River)</li>
<li><em>ordinal</em>: ordered categories. e.g.: Low, Medium, High</li>
<li><em>dateTime</em>: date or time values from the Gregorian calendar. e.g.: 01-01-2001</li>
<li><em>ratio</em>: measurement scale with a meaningful zero point in nature. Ratios are proportional to the measured variable. e.g.: 0 Kelvin represents a complete absence of heat. 200 Kelvin is half as hot as 400 Kelvin. 1.2 meters per second is twice as fast as 0.6 meters per second.</li>
<li><em>interval</em>: values from a scale with equidistant points, where the zero point is arbitrary. This is usually reserved for degrees Celsius or Fahrenheit, or latitude and longitude coordinates, or any other human-constructed scale. e.g.: there is still heat at 0° Celsius; 12° Celsius is NOT half as hot as 24° Celsius</li>
</ul></li>
<li><strong>domain</strong>: One of: textDomain, enumeratedDomain, numericDomain, dateTimeDomain. Required.
<ul>
<li><em>textDomain</em>: text that is free-form, or matches a pattern</li>
<li><em>enumeratedDomain</em>: text that belongs to a defined list of codes and definitions. e.g.: CASC = Cascade Lake, HEAR = Heart Lake</li>
<li><em>dateTimeDomain</em>: dateTime attributes</li>
<li><em>numericDomain</em>: attributes that are numbers (either ratio or interval)</li>
</ul></li>
<li><strong>formatString</strong>: Required for dateTimeDomain, NA otherwise. Format string for dates, e.g. “MM/DD/YYYY”.</li>
<li><strong>definition</strong>: Required for textDomain, NA otherwise. Definition for attributes that are a character string, matches attribute definition in most cases.</li>
<li><strong>unit</strong>: Required for numericDomain, NA otherwise. Unit string. If the unit is not a standard unit, a warning will appear when you create the attribute list, saying that it has been forced into a custom unit. Use caution here to make sure the unit really needs to be a custom unit. A list of standard units can be found here: <a href="https://knb.ecoinformatics.org/#external//emlparser/docs/eml-2.1.1/./eml-unitTypeDefinitions.html#StandardUnitDictionary" class="uri">https://knb.ecoinformatics.org/#external//emlparser/docs/eml-2.1.1/./eml-unitTypeDefinitions.html#StandardUnitDictionary</a></li>
<li><strong>numberType</strong>: Required for numericDomain, NA otherwise. Options are “real”, “natural”, “whole”, “integer”.
<ul>
<li><em>real</em>: positive and negative fractions and non fractions (…-1,-0.25,0,0.25,1…)</li>
<li><em>natural</em>: non-zero positive counting numbers (1,2,3…)</li>
<li><em>whole</em>: positive counting numbers and zero (0,1,2,3…)</li>
<li><em>integer</em>: positive and negative counting numbers and zero (…-2,-1,0,1,2…)</li>
</ul></li>
<li><strong>missingValueCode</strong>: Code for missing values (e.g.: ‘-999’, ‘NA’, ‘NaN’). NA otherwise. Note that an NA missing value code should be a string, ‘NA’, and numbers should also be strings, ‘-999.’</li>
<li><strong>missingValueCodeExplanation</strong>: Explanation for missing values, NA if no missing value code exists.</li>
</ul>
<p>You can create attributes by hand by typing them out in R following a workflow similar to that as below.</p>
<pre class="sourceCode r"><code class="sourceCode r">attributes &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
    
    <span class="dt">attributeName =</span> <span class="kw">c</span>(<span class="st">&#39;Date&#39;</span>, <span class="st">&#39;Location&#39;</span>, <span class="st">&#39;Region&#39;</span>,<span class="st">&#39;Sample_No&#39;</span>, <span class="st">&#39;Sample_vol&#39;</span>, <span class="st">&#39;Salinity&#39;</span>, <span class="st">&#39;Temperature&#39;</span>, <span class="st">&#39;sampling_comments&#39;</span>),
    <span class="dt">attributeDefinition =</span> <span class="kw">c</span>(<span class="st">&#39;Date sample was taken on&#39;</span>, <span class="st">&#39;Location code representing location where sample was taken&#39;</span>,<span class="st">&#39;Region where sample was taken&#39;</span>, <span class="st">&#39;Sample number&#39;</span>, <span class="st">&#39;Sample volume&#39;</span>, <span class="st">&#39;Salinity of sample in PSU&#39;</span>, <span class="st">&#39;Temperature of sample&#39;</span>, <span class="st">&#39;comments about sampling process&#39;</span>),
    <span class="dt">measurementScale =</span> <span class="kw">c</span>(<span class="st">&#39;dateTime&#39;</span>, <span class="st">&#39;nominal&#39;</span>,<span class="st">&#39;nominal&#39;</span>, <span class="st">&#39;nominal&#39;</span>, <span class="st">&#39;ratio&#39;</span>, <span class="st">&#39;ratio&#39;</span>, <span class="st">&#39;interval&#39;</span>, <span class="st">&#39;nominal&#39;</span>),
    <span class="dt">domain =</span> <span class="kw">c</span>(<span class="st">&#39;dateTimeDomain&#39;</span>, <span class="st">&#39;enumeratedDomain&#39;</span>,<span class="st">&#39;enumeratedDomain&#39;</span>, <span class="st">&#39;textDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;textDomain&#39;</span>),
    <span class="dt">formatString =</span> <span class="kw">c</span>(<span class="st">&#39;MM-DD-YYYY&#39;</span>, <span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>),
    <span class="dt">definition =</span> <span class="kw">c</span>(<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="st">&#39;Sample number&#39;</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="st">&#39;comments about sampling process&#39;</span>),
    <span class="dt">unit =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="st">&#39;milliliter&#39;</span>, <span class="st">&#39;dimensionless&#39;</span>, <span class="st">&#39;celsius&#39;</span>, <span class="ot">NA</span>),
    <span class="dt">numberType =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="ot">NA</span>, <span class="st">&#39;real&#39;</span>, <span class="st">&#39;real&#39;</span>, <span class="st">&#39;real&#39;</span>, <span class="ot">NA</span>),
    <span class="dt">missingValueCode =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="st">&#39;NA&#39;</span>),
    <span class="dt">missingValueCodeExplanation =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="st">&#39;no sampling comments&#39;</span>),
    
    <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre>
<p>However, typing this out in R can be a major pain. Luckily, there is a shiny app that you can use to build attribute information. You can use the app to build attributes from a data file loaded into R (recommended as the app will auto-fill some fields for you), or to edit an existing attribute table, or create attributes from scratch using the following commands (the commands will launch a shiny app in your web browser).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># From data (recommended)</span>
datamgmt<span class="op">::</span><span class="kw">create_attributes_table</span>(<span class="dt">data =</span> data)

<span class="co"># From an attribute table</span>
datamgmt<span class="op">::</span><span class="kw">create_attributes_table</span>(<span class="dt">attributes_table =</span> attributes_table)

<span class="co"># From scratch</span>
datamgmt<span class="op">::</span><span class="kw">create_attributes_table</span>()</code></pre>
<p>Once you are done editing a table in the app, click the <code>Print</code> button to print text of a code that will build a data frame in R. Copy that code and assign it to a variable in your script (e.g. <code>attributes &lt;- data.frame(...)</code>).</p>
</div>
<div id="edit-custom-units" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Edit Custom Units</h3>
<p>If you have units that are not in the standard EML unit list, you will need to build a custom unit list. To determine if your units are standard or not you can look through the standard units by using the following commands.</p>
<pre class="sourceCode r"><code class="sourceCode r">standardUnits &lt;-<span class="st"> </span><span class="kw">get_unitList</span>()
<span class="kw">View</span>(standardUnits<span class="op">$</span>units)</code></pre>
<p>Additionally, <code>datamgmt::create_attributes_table</code> will tell you if each of your units are standard or not. If your unit is not standard, you should use the following code to help auto-generate a custom unit.</p>
<pre class="sourceCode r"><code class="sourceCode r">datamgmt<span class="op">::</span><span class="kw">get_custom_units</span>(<span class="st">&quot;your_unit&quot;</span>)</code></pre>
<p>Note, <code>datamgmt::create_attributes_table</code> calls <code>datamgmt::get_custom_units</code> for you! Custom units need to have the following columns.</p>
<ul>
<li><strong>id</strong></li>
<li><strong>unitType</strong></li>
<li><strong>parentSI</strong></li>
<li><strong>multiplierToSI</strong></li>
<li><strong>abbreviation</strong></li>
<li><strong>definition</strong></li>
</ul>
<p><code>datamgmt::get_custom_units</code> will auto-generate many of these fields for you (<strong>but don’t just assume the autogeneration will be perfect, always ensure the autogeneration correctly handles your unit</strong>)</p>
</div>
<div id="edit-factors" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Edit Factors</h3>
<p>For attributes that are <code>enumeratedDomains</code>, a table is needed with three columns: <code>attributeName</code>, <code>code</code>, and <code>definition</code>.</p>
<ul>
<li><strong>attributeName</strong> should be the same as the <code>attributeName</code> within the attribute table and repeated for all codes belonging to a common attribute.</li>
<li><strong>code</strong> should contain all unique values of the given <code>attributeName</code> that exist within the actual data.</li>
<li><strong>definition</strong> should contain a plain text definition that describes each code.</li>
</ul>
<p>There is a tab in the <code>datamgmt::create_attributes_table</code> app that will help you build factors.</p>
<p>If you need to build factors by hand, you can use named character vectors and then convert them to a data frame as shown in the example below.
In this example, there are two enumerated domains in the attribute list - “Location” and “Region”</p>
<pre class="sourceCode r"><code class="sourceCode r">Location &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">CASC =</span> <span class="st">&#39;Cascade Lake&#39;</span>, <span class="dt">CHIK =</span> <span class="st">&#39;Chikumunik Lake&#39;</span>, <span class="dt">HEAR =</span> <span class="st">&#39;Heart Lake&#39;</span>, <span class="dt">NISH =</span> <span class="st">&#39;Nishlik Lake&#39;</span> )
Region &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">W_MTN =</span> <span class="st">&#39;West region, locations West of Eagle Mountain&#39;</span>, <span class="dt">E_MTN =</span> <span class="st">&#39;East region, locations East of Eagle Mountain&#39;</span>)</code></pre>
<p>The definitions are then written into a data frame using the names of the named character vectors, and their definitions.</p>
<pre class="sourceCode r"><code class="sourceCode r">factors &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">data.frame</span>(<span class="dt">attributeName =</span> <span class="st">&#39;Location&#39;</span>, <span class="dt">code =</span> <span class="kw">names</span>(Location), <span class="dt">definition =</span> <span class="kw">unname</span>(Location)),
                  <span class="kw">data.frame</span>(<span class="dt">attributeName =</span> <span class="st">&#39;Region&#39;</span>, <span class="dt">code =</span> <span class="kw">names</span>(Region), <span class="dt">definition =</span> <span class="kw">unname</span>(Region)))</code></pre>
</div>
<div id="finalize-attributelist" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Finalize attributeList</h3>
<p>Once you have built your attributes, factors, and custom units, you can add them to eml objects. Attributes and factors are combined to form an <code>attributeList</code> using the following command.</p>
<pre class="sourceCode r"><code class="sourceCode r">attributeList &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">set_attributes</span>(<span class="dt">attributes =</span> attributes,
                                     <span class="dt">factors =</span> factors) </code></pre>
<p>This <code>attributeList</code> must then be <a href="editing-eml-in-r.html#edit-datatables">added to a <code>dataTable</code></a>. Custom units are added to <code>additionalMetadata</code> using the following command.</p>
<pre class="sourceCode r"><code class="sourceCode r">unitlist &lt;-<span class="st"> </span><span class="kw">set_unitList</span>(custom_units)
eml<span class="op">@</span>additionalMetadata &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">as</span>(unitlist, <span class="st">&quot;additionalMetadata&quot;</span>))</code></pre>
</div>
</div>
<div id="set-physical" class="section level2">
<h2><span class="header-section-number">6.3</span> Set physical</h2>
<p>To set the <code>physical</code> aspects of a <code>dataTable</code>, use the following commands to build a <code>physical</code> object from a data <code>pid</code> that exists in your package.</p>
<pre class="sourceCode r"><code class="sourceCode r">physical &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">pid_to_eml_physical</span>(mn, pkg<span class="op">$</span>data[[i]])</code></pre>
<p>Alternatively, you can get the physical of a data object not in your package by simply inputting the data pid.</p>
<pre class="sourceCode r"><code class="sourceCode r">physical &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">pid_to_eml_physical</span>(mn, <span class="st">&quot;your_data_pid&quot;</span>)</code></pre>
<p>Note, the <code>physical</code> must then be <a href="editing-eml-in-r.html#edit-datatables">added to a <code>dataTable</code></a>.</p>
<p>A final, but not recommended option, is to set the physical by hand. To do so one can use a workflow similar to the one below. However, the far superior workflow is to <a href="create-data-packages-in-r.html#publish-an-object">publish</a> or <a href="update-a-data-package.html#update-an-object">update</a> your data first and then use `<code>pid_to_eml_physical</code> to set the <code>physical</code></p>
<pre class="sourceCode r"><code class="sourceCode r">id &lt;-<span class="st"> &#39;your_data_pid&#39;</span> <span class="co">#this should be an actual PID</span>
path &lt;-<span class="st"> &#39;~/your/data/path&#39;</span> <span class="co">#path to data table</span>
physical &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">set_physical</span>(<span class="dt">objectName =</span> <span class="st">&#39;your_file_name&#39;</span>, 
                         <span class="dt">id =</span> id, 
                         <span class="dt">size =</span> <span class="kw">as.character</span>(<span class="kw">file.size</span>(path)), 
                         <span class="dt">sizeUnit =</span> <span class="st">&#39;bytes&#39;</span>,
                         <span class="dt">authentication =</span> <span class="kw">digest</span>(path, <span class="dt">algo=</span><span class="st">&quot;sha1&quot;</span>, <span class="dt">serialize=</span><span class="ot">FALSE</span>, <span class="dt">file=</span><span class="ot">TRUE</span>), 
                         <span class="dt">authMethod =</span> <span class="st">&#39;SHA-1&#39;</span>,
                         <span class="dt">numHeaderLines =</span> <span class="st">&#39;1&#39;</span>, 
                         <span class="dt">fieldDelimiter =</span> <span class="st">&#39;,&#39;</span>,
                         <span class="dt">url =</span> <span class="kw">paste0</span>(<span class="st">&#39;https://cn.dataone.org/cn/v2/resolve/&#39;</span>, id))</code></pre>
</div>
<div id="edit-datatables" class="section level2">
<h2><span class="header-section-number">6.4</span> Edit dataTables</h2>
<p>To edit a <code>dataTable</code>, first <a href="editing-eml-in-r.html#edit-attributelists">edit/create an <code>attributeList</code></a> and <a href="editing-eml-in-r.html#set-physical">set the physical</a>.
Then create a new dataTable with the <code>new()</code> command as follows.</p>
<pre class="sourceCode r"><code class="sourceCode r">dataTable &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;dataTable&quot;</span>,
                 <span class="dt">entityName =</span> <span class="st">&quot;A descriptive name for the data (does not need to be the same as the data file)&quot;</span>,
                 <span class="dt">entityDescription =</span> <span class="st">&quot;A description of the data&quot;</span>,
                 <span class="dt">physical =</span> physical,
                 <span class="dt">attributeList =</span> attributeList)</code></pre>
<p>The <code>dataTable</code> must then be set to the eml i.e. <code>eml@dataset@dataTable[[i]] &lt;- dataTable</code>.</p>
</div>
<div id="edit-otherentities" class="section level2">
<h2><span class="header-section-number">6.5</span> Edit otherEntities</h2>
<div id="remove-otherentities" class="section level3">
<h3><span class="header-section-number">6.5.1</span> Remove otherEntities</h3>
<p>To remove an <code>otherEntity</code> use the following command. This may be useful if a data object is originally listed as an <code>otherEntity</code> and then transferred to a <code>dataTable</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">eml<span class="op">@</span>dataset<span class="op">@</span>otherEntity[[i]] &lt;-<span class="st"> </span><span class="ot">NULL</span></code></pre>
</div>
<div id="create-otherentities" class="section level3">
<h3><span class="header-section-number">6.5.2</span> Create otherEntities</h3>
<p>If you need to create/update an <code>otherEntity</code>make sure to <a href="create-data-packages-in-r.html#publish-an-object">publish</a> or <a href="update-a-data-package.html#update-an-object">update</a> your data object first (if it is not already on the DataONE node). Then build your <code>otherEntity</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">otherEntity &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">pid_to_eml_other_entity</span>(mn, pkg<span class="op">$</span>data[[i]])[[<span class="dv">1</span>]]</code></pre>
<p>Alternatively, you can build the <code>otherEntity</code> of a data object not in your package by simply inputting the data pid.</p>
<pre class="sourceCode r"><code class="sourceCode r">otherEntity &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">pid_to_eml_other_entity</span>(mn, <span class="st">&quot;your_data_pid&quot;</span>)[[<span class="dv">1</span>]]</code></pre>
<p>Next, give the <code>otherEntity</code> a name and description.</p>
<pre class="sourceCode r"><code class="sourceCode r">otherEntity<span class="op">@</span>entityName &lt;-<span class="st"> </span><span class="kw">as</span>(<span class="st">&quot;A descriptive name for the data&quot;</span>, <span class="st">&quot;entityName&quot;</span>)
otherEntity<span class="op">@</span>entityDescription &lt;-<span class="st"> </span><span class="kw">as</span>(<span class="st">&quot;A description of the data&quot;</span>, <span class="st">&quot;entityDescription&quot;</span>)</code></pre>
<p>The <code>otherEntity</code> must then be set to the eml i.e.</p>
<pre class="sourceCode r"><code class="sourceCode r">eml<span class="op">@</span>dataset<span class="op">@</span>otherEntity[[i]] &lt;-<span class="st"> </span>otherEntity</code></pre>
</div>
</div>
<div id="set-coverages" class="section level2">
<h2><span class="header-section-number">6.6</span> Set coverages</h2>
<p>Sometimes EML documents may lack coverage information describing the temporal, geographic, or taxonomic coverage of a data set. This example shows how to create coverage information from scratch, or replace an existing coverage element with an updated one. You can view the current coverage (if it exists) by entering <code>eml@dataset@coverage</code> into the console. Here the coverage, including temporal, taxonomic, and geographic coverages, is defined using <code>set_coverage</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">coverage &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">set_coverage</span>(<span class="dt">beginDate =</span> <span class="st">&#39;2012-01-01&#39;</span>, 
                              <span class="dt">endDate =</span> <span class="st">&#39;2012-01-10&#39;</span>, 
                              <span class="dt">sci_names =</span> <span class="kw">c</span>(<span class="st">&#39;exampleGenus exampleSpecies1&#39;</span>, <span class="st">&#39;exampleGenus ExampleSpecies2&#39;</span>),
                              <span class="dt">geographicDescription =</span> <span class="st">&quot;The geographic region covers the lake region near Eagle Mountain.&quot;</span>,
                              <span class="dt">west =</span> <span class="fl">-154.6192</span>, 
                              <span class="dt">east =</span> <span class="fl">-154.5753</span>, 
                              <span class="dt">north =</span> <span class="fl">68.3831</span>, 
                              <span class="dt">south =</span> <span class="fl">68.3619</span>)
eml<span class="op">@</span>dataset<span class="op">@</span>coverage &lt;-<span class="st"> </span>coverage</code></pre>
<p>You can also set multiple geographic (or temporal) coverages. Here is an example of how you might set two geographic coverages.</p>
<pre class="sourceCode r"><code class="sourceCode r">geocov1 &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;geographicCoverage&quot;</span>, <span class="dt">geographicDescription =</span> <span class="st">&quot;The geographich region covers area 1&quot;</span>,
               <span class="dt">boundingCoordinates =</span> <span class="kw">new</span>(<span class="st">&quot;boundingCoordinates&quot;</span>, 
                                         <span class="dt">northBoundingCoordinate =</span> <span class="kw">new</span>(<span class="st">&quot;northBoundingCoordinate&quot;</span>, <span class="dv">68</span>),
                                         <span class="dt">eastBoundingCoordinate =</span> <span class="kw">new</span>(<span class="st">&quot;eastBoundingCoordinate&quot;</span>, <span class="dv">-154</span>),
                                         <span class="dt">southBoundingCoordinate =</span> <span class="kw">new</span>(<span class="st">&quot;southBoundingCoordinate&quot;</span>, <span class="dv">67</span>),
                                         <span class="dt">westBoundingCoordinate =</span>  <span class="kw">new</span>(<span class="st">&quot;westBoundingCoordinate&quot;</span>, <span class="dv">-155</span>)))

geocov2 &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;geographicCoverage&quot;</span>, <span class="dt">geographicDescription =</span> <span class="st">&quot;The geographich region covers area 2&quot;</span>,
               <span class="dt">boundingCoordinates =</span> <span class="kw">new</span>(<span class="st">&quot;boundingCoordinates&quot;</span>,
                                         <span class="dt">northBoundingCoordinate =</span> <span class="kw">new</span>(<span class="st">&quot;northBoundingCoordinate&quot;</span>, <span class="dv">65</span>),
                                         <span class="dt">eastBoundingCoordinate =</span> <span class="kw">new</span>(<span class="st">&quot;eastBoundingCoordinate&quot;</span>, <span class="dv">-155</span>),
                                         <span class="dt">southBoundingCoordinate =</span> <span class="kw">new</span>(<span class="st">&quot;southBoundingCoordinate&quot;</span>, <span class="dv">64</span>),
                                         <span class="dt">westBoundingCoordinate =</span>  <span class="kw">new</span>(<span class="st">&quot;westBoundingCoordinate&quot;</span>, <span class="dv">-156</span>)))

coverage &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">set_coverage</span>(<span class="dt">beginDate =</span> <span class="st">&#39;2012-01-01&#39;</span>, 
                              <span class="dt">endDate =</span> <span class="st">&#39;2012-01-10&#39;</span>, 
                              <span class="dt">sci_names =</span> <span class="kw">c</span>(<span class="st">&#39;exampleGenus exampleSpecies1&#39;</span>, <span class="st">&#39;exampleGenus ExampleSpecies2&#39;</span>))
eml<span class="op">@</span>dataset<span class="op">@</span>coverage<span class="op">@</span>geographicCoverage &lt;-<span class="st"> </span><span class="kw">c</span>(geocov1, geocov2)</code></pre>
</div>
<div id="set-methods" class="section level2">
<h2><span class="header-section-number">6.7</span> Set methods</h2>
<p>The methods tree in the EML section has many different options, visible in the <a href="https://knb.ecoinformatics.org/emlparser/docs/eml-2.1.1/eml-methods.png">schema</a>. You can create new elements in the methods tree by following the schema and using the “new” command. Remember you can explore possible slots within an element by creating an empty object of the class you are trying to create. For example, <code>method_step &lt;- new('methodStep')</code>, and using auto-complete on <code>method_step@</code>.</p>
<p>Potentially the most useful way to set methods is by <a href="editing-eml-in-r.html#edit-eml-with-eml">editing with EML</a></p>
<p>Another simple, and potentially useful way to add methods to an EML that have no methods at all is adding them via a word document. An example is shown below:</p>
<pre class="sourceCode r"><code class="sourceCode r">methods1 &lt;-<span class="st"> </span><span class="kw">set_methods</span>(<span class="st">&#39;methods_doc.docx&#39;</span>)
eml<span class="op">@</span>dataset<span class="op">@</span>methods &lt;-<span class="st"> </span>methods1</code></pre>
<p>If you want to make minor changes to existing method information that has a lot of nested elements, your best bet may be to edit the EML manually in a text editor (or in RStudio), otherwise there is a risk of accidentally overwriting nested elements with blank object classes, therefore losing method information.</p>
</div>
<div id="set-parties" class="section level2">
<h2><span class="header-section-number">6.8</span> Set parties</h2>
<p>To add people, with their addresses, you need to add addresses as their own object class, which you then add to the contact, creator, or associated party classes.</p>
<pre class="sourceCode r"><code class="sourceCode r">NCEASadd &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;address&quot;</span>, 
                <span class="dt">deliveryPoint =</span> <span class="st">&quot;735 State St #300&quot;</span>, 
                <span class="dt">city =</span> <span class="st">&quot;Santa Barbara&quot;</span>, 
                <span class="dt">administrativeArea =</span> <span class="st">&#39;CA&#39;</span>, 
                <span class="dt">postalCode =</span> <span class="st">&#39;93101&#39;</span>)</code></pre>
<p>The creator, contact, and associated party classes can easily be created using functions from the <code>arcticdatautils</code> package. Here, we use <code>eml_creator</code> to set our data set creator.</p>
<pre class="sourceCode r"><code class="sourceCode r">JC_creator &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">eml_creator</span>(<span class="st">&quot;Jeanette&quot;</span>, 
                                           <span class="st">&quot;Clark&quot;</span>, 
                                           <span class="st">&quot;NCEAS&quot;</span>, 
                                           <span class="st">&quot;jclark@nceas.ucsb.edu&quot;</span>, 
                                           <span class="dt">phone =</span> <span class="st">&quot;123-456-7890&quot;</span>, 
                                           <span class="dt">userId =</span> <span class="st">&quot;https://orcid.org/WWWW-XXXX-YYYY-ZZZZ&quot;</span>,
                                           <span class="dt">address =</span> NCEASadd)
eml<span class="op">@</span>dataset<span class="op">@</span>creator &lt;-<span class="st"> </span><span class="kw">c</span>(JC_creator)</code></pre>
<p>Similarly, we can set the contacts. In this case, there are two, so we set <code>eml@dataset@contact</code> as a <code>ListOfcontact</code>, which contains both of them.</p>
<pre class="sourceCode r"><code class="sourceCode r">JC_contact &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">eml_contact</span>(<span class="st">&quot;Jeanette&quot;</span>, 
                                           <span class="st">&quot;Clark&quot;</span>, 
                                           <span class="st">&quot;NCEAS&quot;</span>, 
                                           <span class="st">&quot;jclark@nceas.ucsb.edu&quot;</span>, 
                                           <span class="dt">phone =</span> <span class="st">&quot;123-456-7890&quot;</span>,  
                                           <span class="dt">userId =</span> <span class="st">&quot;https://orcid.org/WWWW-XXXX-YYYY-ZZZZ&quot;</span>,
                                           <span class="dt">address =</span> NCEASadd)
JG_contact &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">eml_contact</span>(<span class="st">&quot;Jesse&quot;</span>, 
                                           <span class="st">&quot;Goldstein&quot;</span>, 
                                           <span class="st">&quot;NCEAS&quot;</span>, 
                                           <span class="st">&quot;jgoldstein@nceas.ucsb.edu&quot;</span>, 
                                           <span class="dt">phone =</span> <span class="st">&quot;123-456-7890&quot;</span>,  
                                           <span class="dt">userId =</span> <span class="st">&quot;https://orcid.org/WWWW-XXXX-YYYY-ZZZZ&quot;</span>,
                                           <span class="dt">address =</span> NCEASadd)
eml<span class="op">@</span>dataset<span class="op">@</span>contact &lt;-<span class="st"> </span><span class="kw">c</span>(JC_contact, JG_contact)</code></pre>
<p>Finally, the associated parties are set. Note that associated parties MUST have a role defined, unlike creator or contact.</p>
<pre class="sourceCode r"><code class="sourceCode r">JG_ap &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">eml_associated_party</span>(<span class="st">&quot;Jesse&quot;</span>, 
                                               <span class="st">&quot;Goldstein&quot;</span>, 
                                               <span class="st">&quot;NCEAS&quot;</span>, 
                                               <span class="st">&quot;jclark@nceas.ucsb.edu&quot;</span>, 
                                               <span class="dt">phone =</span> <span class="st">&quot;123-456-7890&quot;</span>,  
                                               <span class="dt">address =</span> NCEASadd, 
                                               <span class="dt">userId =</span> <span class="st">&quot;https://orcid.org/WWWW-XXXX-YYYY-ZZZZ&quot;</span>,
                                               <span class="dt">role =</span> <span class="st">&quot;metaataProvider&quot;</span>)
eml<span class="op">@</span>dataset<span class="op">@</span>associatedParty &lt;-<span class="st"> </span><span class="kw">c</span>(JG_ap)</code></pre>
</div>
<div id="exercise-4" class="section level2 exercise">
<h2><span class="header-section-number">6.9</span> Exercise 4</h2>
<ul>
<li>Make sure your package from <a href="update-a-data-package.html#exercise-3">before</a> is loaded into R</li>
<li>Replace the existing <code>dataTable</code> with a new <code>dataTable</code> object with an attribute list and physical section you write in R using the above commands</li>
<li>Then <a href="update-a-data-package.html#update-a-package">write, validate, and update your package</a></li>
<li>Use the <a href="https://github.nceas.ucsb.edu/KNB/arctic-data/blob/master/datateam/How_To/Checklist.md">checklist</a> to review your submission.</li>
<li>Make edits where necessary, and publish updates as needed</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="explore-eml.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="system-metadata.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
